var vn=Object.defineProperty,wn=Object.defineProperties,_n=Object.getOwnPropertyDescriptors,Dt=Object.getOwnPropertySymbols,En=Object.prototype.hasOwnProperty,Sn=Object.prototype.propertyIsEnumerable,Bt=(t,e)=>{if(e=Symbol[t])return e;throw Error("Symbol."+t+" is not defined")},rt=(t,e,n)=>e in t?vn(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,_=(t,e)=>{for(var n in e||(e={}))En.call(e,n)&&rt(t,n,e[n]);if(Dt)for(var n of Dt(e))Sn.call(e,n)&&rt(t,n,e[n]);return t},z=(t,e)=>wn(t,_n(e)),w=(t,e,n)=>(rt(t,typeof e!="symbol"?e+"":e,n),n),nt=(t,e,n)=>{if(!e.has(t))throw TypeError("Cannot "+n)},j=(t,e,n)=>(nt(t,e,"read from private field"),n?n.call(t):e.get(t)),X=(t,e,n)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,n)},Lt=(t,e,n,r)=>(nt(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),ke=(t,e,n)=>(nt(t,e,"access private method"),n),B=function(t,e){this[0]=t,this[1]=e},Z=(t,e,n)=>{var r=(a,s,u,c)=>{try{var p=n[a](s),m=(s=p.value)instanceof B,b=p.done;Promise.resolve(m?s[0]:s).then(d=>m?r(a==="return"?a:"next",s[1]?{done:d.done,value:d.value}:d,u,c):u({value:d,done:b})).catch(d=>r("throw",d,u,c))}catch(d){c(d)}},o=a=>i[a]=s=>new Promise((u,c)=>r(a,s,u,c)),i={};return n=n.apply(t,e),i[Symbol.asyncIterator]=()=>i,o("next"),o("throw"),o("return"),i},oe=(t,e,n)=>(e=t[Bt("asyncIterator")])?e.call(t):(t=t[Bt("iterator")](),e={},n=(r,o)=>(o=t[r])&&(e[r]=i=>new Promise((a,s,u)=>(i=o.call(t,i),u=i.done,Promise.resolve(i.value).then(c=>a({value:c,done:u}),s)))),n("next"),n("return"),e);const Pn=":host{display:flex;align-items:center;justify-content:center}\n";class An extends HTMLElement{constructor(){var e,n;super(),w(this,"size"),w(this,"color"),this.size=(e=this.getAttribute("size"))!=null?e:"1.5rem",this.color=(n=this.getAttribute("color"))!=null?n:"gray",this.attachShadow({mode:"open"})}connectedCallback(){this.render();const e=document.createElement("style");e.textContent=Pn,this.shadowRoot.appendChild(e)}render(){const e=this.shadowRoot,n='\n      width="'.concat(this.size,'"\n      height="').concat(this.size,'"\n      xmlns="http://www.w3.org/2000/svg"\n      aria-hidden="true"\n    ');switch(this.getAttribute("name")){case"warning":e.innerHTML="\n          <svg ".concat(n,' viewBox="0 0 16 14" fill="').concat(this.color,'">\n            <path d="M5.925 2.344c1.146-1.889 3.002-1.893 4.149 0l4.994 8.235c1.146 1.889.288 3.421-1.916 3.421h-10.305c-2.204 0-3.063-1.529-1.916-3.421l4.994-8.235zm1.075 1.656v5h2v-5h-2zm0 6v2h2v-2h-2z"/>\n          </svg>\n        ');break;case"close":e.innerHTML="\n          <svg ".concat(n,' viewBox="0 0 20 20" fill="').concat(this.color,'">\n            <path d="M17.1 4.3l-1.4-1.4-5.7 5.7-5.7-5.7-1.4 1.4 5.7 5.7-5.7 5.7 1.4 1.4 5.7-5.7 5.7 5.7 1.4-1.4-5.7-5.7z"/>\n          </svg>\n        ');break;default:e.innerHTML="";break}}}const On="#overlay{position:fixed;width:100%;height:100%;background:rgba(0,0,0,.4);top:0;left:0;z-index:2147483647;animation:modalPop .3s ease-out}#modal{position:fixed;top:1em;left:50%;width:100%;max-width:460px;transform:translate(-50%,-100%);background:#fff;border:1px solid #d0d0d0;border-radius:4px;animation:modalSlideInFromTop .3s forwards}@keyframes modalPop{0%{opacity:0}to{opacity:1}}@keyframes modalSlideInFromTop{0%{transform:translate(-50%,-100%)}to{transform:translate(-50%)}}@keyframes modalSlideInFromBottom{0%{transform:translate(-50%,100%)}to{transform:translate(-50%)}}@media only screen and (max-width: 640px){#modal{top:auto;bottom:0;animation:modalSlideInFromBottom .3s forwards}}#modal header,#modal footer{padding:1em}#modal header{display:flex;margin-bottom:2em;text-align:center;border-bottom:1px solid #d0d0d0}#title{flex-grow:2;display:flex;justify-content:center}#title svg-icon{margin-right:.25em}#content{text-align:left;padding:0 1em}#modal #content p{margin:0}#close-icon,#close-button{cursor:pointer}#close-icon{background:transparent;padding:0;border:none}#close-button{width:100%;padding:1em;color:#fff;background-color:#1773b0;border:none;border-radius:4px}#close-button:hover,#close-button:active{background:#136f99}#close-button:active,#close-button:focus{box-shadow:0 0 0 4px #1990c640}\n";var gr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Tn(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Mn(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var o=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,o.get?o:{enumerable:!0,get:function(){return t[r]}})}),n}var br={exports:{}},at={exports:{}},$t;function In(){return $t||($t=1,function(t,e){(function(n,r){t.exports=r()})(gr,function(){function n(l){return!isNaN(parseFloat(l))&&isFinite(l)}function r(l){return l.charAt(0).toUpperCase()+l.substring(1)}function o(l){return function(){return this[l]}}var i=["isConstructor","isEval","isNative","isToplevel"],a=["columnNumber","lineNumber"],s=["fileName","functionName","source"],u=["args"],c=["evalOrigin"],p=i.concat(a,s,u,c);function m(l){if(l)for(var h=0;h<p.length;h++)l[p[h]]!==void 0&&this["set"+r(p[h])](l[p[h]])}m.prototype={getArgs:function(){return this.args},setArgs:function(l){if(Object.prototype.toString.call(l)!=="[object Array]")throw new TypeError("Args must be an Array");this.args=l},getEvalOrigin:function(){return this.evalOrigin},setEvalOrigin:function(l){if(l instanceof m)this.evalOrigin=l;else if(l instanceof Object)this.evalOrigin=new m(l);else throw new TypeError("Eval Origin must be an Object or StackFrame")},toString:function(){var l=this.getFileName()||"",h=this.getLineNumber()||"",f=this.getColumnNumber()||"",y=this.getFunctionName()||"";return this.getIsEval()?l?"[eval] ("+l+":"+h+":"+f+")":"[eval]:"+h+":"+f:y?y+" ("+l+":"+h+":"+f+")":l+":"+h+":"+f}},m.fromString=function(l){var h=l.indexOf("("),f=l.lastIndexOf(")"),y=l.substring(0,h),g=l.substring(h+1,f).split(","),O=l.substring(f+1);if(O.indexOf("@")===0)var E=/@(.+?)(?::(\d+))?(?::(\d+))?$/.exec(O,""),A=E[1],D=E[2],R=E[3];return new m({functionName:y,args:g||void 0,fileName:A,lineNumber:D||void 0,columnNumber:R||void 0})};for(var b=0;b<i.length;b++)m.prototype["get"+r(i[b])]=o(i[b]),m.prototype["set"+r(i[b])]=function(l){return function(h){this[l]=!!h}}(i[b]);for(var d=0;d<a.length;d++)m.prototype["get"+r(a[d])]=o(a[d]),m.prototype["set"+r(a[d])]=function(l){return function(h){if(!n(h))throw new TypeError(l+" must be a Number");this[l]=Number(h)}}(a[d]);for(var v=0;v<s.length;v++)m.prototype["get"+r(s[v])]=o(s[v]),m.prototype["set"+r(s[v])]=function(l){return function(h){this[l]=String(h)}}(s[v]);return m})}(at)),at.exports}(function(t,e){(function(n,r){t.exports=r(In())})(gr,function(n){var r=/(^|@)\S+:\d+/,o=/^\s*at .*(\S+:\d+|\(native\))/m,i=/^(eval@)?(\[native code])?$/;return{parse:function(a){if(typeof a.stacktrace<"u"||typeof a["opera#sourceloc"]<"u")return this.parseOpera(a);if(a.stack&&a.stack.match(o))return this.parseV8OrIE(a);if(a.stack)return this.parseFFOrSafari(a);throw new Error("Cannot parse given Error object")},extractLocation:function(a){if(a.indexOf(":")===-1)return[a];var s=/(.+?)(?::(\d+))?(?::(\d+))?$/,u=s.exec(a.replace(/[()]/g,""));return[u[1],u[2]||void 0,u[3]||void 0]},parseV8OrIE:function(a){var s=a.stack.split("\n").filter(function(u){return!!u.match(o)},this);return s.map(function(u){u.indexOf("(eval ")>-1&&(u=u.replace(/eval code/g,"eval").replace(/(\(eval at [^()]*)|(,.*$)/g,""));var c=u.replace(/^\s+/,"").replace(/\(eval code/g,"(").replace(/^.*?\s+/,""),p=c.match(/ (\(.+\)$)/);c=p?c.replace(p[0],""):c;var m=this.extractLocation(p?p[1]:c),b=p&&c||void 0,d=["eval","<anonymous>"].indexOf(m[0])>-1?void 0:m[0];return new n({functionName:b,fileName:d,lineNumber:m[1],columnNumber:m[2],source:u})},this)},parseFFOrSafari:function(a){var s=a.stack.split("\n").filter(function(u){return!u.match(i)},this);return s.map(function(u){if(u.indexOf(" > eval")>-1&&(u=u.replace(/ line (\d+)(?: > eval line \d+)* > eval:\d+:\d+/g,":$1")),u.indexOf("@")===-1&&u.indexOf(":")===-1)return new n({functionName:u});var c=/((.*".+"[^@]*)?[^@]*)(?:@)/,p=u.match(c),m=p&&p[1]?p[1]:void 0,b=this.extractLocation(u.replace(c,""));return new n({functionName:m,fileName:b[0],lineNumber:b[1],columnNumber:b[2],source:u})},this)},parseOpera:function(a){return!a.stacktrace||a.message.indexOf("\n")>-1&&a.message.split("\n").length>a.stacktrace.split("\n").length?this.parseOpera9(a):a.stack?this.parseOpera11(a):this.parseOpera10(a)},parseOpera9:function(a){for(var s=/Line (\d+).*script (?:in )?(\S+)/i,u=a.message.split("\n"),c=[],p=2,m=u.length;p<m;p+=2){var b=s.exec(u[p]);b&&c.push(new n({fileName:b[2],lineNumber:b[1],source:u[p]}))}return c},parseOpera10:function(a){for(var s=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,u=a.stacktrace.split("\n"),c=[],p=0,m=u.length;p<m;p+=2){var b=s.exec(u[p]);b&&c.push(new n({functionName:b[3]||void 0,fileName:b[2],lineNumber:b[1],source:u[p]}))}return c},parseOpera11:function(a){var s=a.stack.split("\n").filter(function(u){return!!u.match(r)&&!u.match(/^Error created at/)},this);return s.map(function(u){var c=u.split("@"),p=this.extractLocation(c.pop()),m=c.shift()||"",b=m.replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^)]*\)/g,"")||void 0,d;m.match(/\(([^)]*)\)/)&&(d=m.replace(/^[^(]+\(([^)]*)\)$/,"$1"));var v=d===void 0||d==="[arguments not available]"?void 0:d.split(",");return new n({functionName:b,args:v,fileName:p[0],lineNumber:p[1],columnNumber:p[2],source:u})},this)}}})})(br);var Nn=br.exports;const kn=Tn(Nn);function Rn(t,e){return!!(e!=null&&e.includes(t))}function xn(t,e){try{return kn.parse(e).map(n=>{var r,o,i;return{method:(r=n.functionName)!=null?r:"",file:(o=n.fileName)!=null?o:"",lineNumber:(i=n.lineNumber)!=null?i:0,columnNumber:n.columnNumber,inProject:Rn(t,n.fileName)}})}catch(n){return[]}}var Ut="5",Dn=class{constructor(t){w(this,"breadcrumbs",[]),w(this,"apiKey"),w(this,"appId"),w(this,"appVersion"),w(this,"releaseStage"),w(this,"locale"),w(this,"userAgent"),w(this,"metadata"),w(this,"onError"),this.apiKey=t.apiKey,this.appId=t.appId,this.appVersion=t.appVersion,this.releaseStage=t.releaseStage,this.locale=t.locale,this.userAgent=t.userAgent,this.metadata=t.metadata,this.onError=t.onError,this.leaveBreadcrumb("Bugsnag started","state")}leaveBreadcrumb(t,e,n){this.breadcrumbs.push({name:t,metaData:n,type:e,timestamp:new Date().toISOString()})}notify(t,{severity:e="error",type:n="handledException",handled:r=!0,metadata:o={},context:i}={}){var a,s;let u=_(_({},this.metadata),o),c=this.buildBugsnagEvent({error:t,type:n,handled:r,severity:e,metadata:u,context:i});return((s=(a=this.onError)==null?void 0:a.call(this,c))==null||s)&&this.releaseStage!=="development"?this.sendToBugsnag(c):Promise.resolve()}buildBugsnagEvent({error:t,severity:e,type:n,handled:r,metadata:o,context:i}){let a=new Date().toISOString(),{breadcrumbs:s,appId:u,appVersion:c,releaseStage:p,locale:m,userAgent:b}=this;return{payloadVersion:Ut,exceptions:[{errorClass:t.name,stacktrace:xn(u,t),message:t.message}],severity:e,severityReason:{type:n},unhandled:!r,app:{id:u,version:c,releaseStage:p},device:{time:a,locale:m,userAgent:b},breadcrumbs:s,context:i,metaData:o}}async sendToBugsnag(t){let{apiKey:e}=this,n={apiKey:e,notifier:{name:"Bugsnag JavaScript",version:"7.22.2",url:"https://github.com/bugsnag/bugsnag-js"},events:[t]};await fetch("https://notify.bugsnag.com/",{method:"POST",headers:{"Content-Type":"application/json","Bugsnag-Api-Key":e,"Bugsnag-Payload-Version":Ut,"Bugsnag-Sent-At":t.device.time},body:JSON.stringify(n)})}};function Bn(t){let e=window.onerror;window.onerror=(n,r,o,i,a)=>{a&&t.notify(a,{type:"unhandledException",handled:!1}),typeof e=="function"&&e.apply(window.onerror,[n,r,o,i,a])}}function Ln(t){window.addEventListener("unhandledrejection",({reason:e})=>{e&&t.notify(e,{type:"unhandledPromiseRejection",handled:!1})})}function vr(t){try{const e=new RegExp("(".concat(t,")=([^;]+)")).exec(document.cookie);return e?e[2]:null}catch(e){return null}}const bt={BRANDED_BUTTON:"shopify-payment-button__button shopify-payment-button__button--branded",UNBRANDED_BUTTON:"shopify-payment-button__button shopify-payment-button__button--unbranded",MORE_PAYMENT_OPTION_BUTTON:"shopify-payment-button__more-options",HIDDEN:"shopify-payment-button__button--hidden"},$n="_shopify_y",Un=["Load failed","Failed to fetch","when attempting to fetch resource"],jn=["Chrome-Lighthouse"],ut={};function Fn(t){return!t.exceptions[0]||(Gn(t),qn())?!1:Hn(t)}function qn(){const t=navigator.userAgent;return jn.some(e=>t.includes(e))}function Gn(t){var e,n;t.context=window.location.pathname,t.request||(t.request={}),t.request.url=window.location.href,t.device.orientation=(n=(e=window.screen)==null?void 0:e.orientation)==null?void 0:n.type,t.metaData=_(_({},ut),t.metaData)}function Hn(t){const e=t.exceptions[0];return Un.some(n=>{var r,o;return(o=(r=e.message)==null?void 0:r.includes(n))!=null?o:!1})||e.stacktrace.some(n=>{var r;return(r=n.file)==null?void 0:r.includes("spin.dev")})||e.errorClass==="OpenTelemetryClientError"&&(e.message==="Server responded with 404"||e.message==="Server responded with undefined")?!1:e.stacktrace.some(n=>!!(n!=null&&n.inProject))}var yr;const Wn={apiKey:"cb577dc231be1c7494db8a63441ef66b",appId:"portable-wallets",appVersion:"0.0.0-88ea51f5e32e87b2ba10765799f2505ea0dc37f4",releaseStage:"production",locale:"en",userAgent:navigator.userAgent,metadata:{user:{id:(yr=vr($n))!=null?yr:"unknown"}},onError:Fn},S=new Dn(Wn);function wr(t){for(const[e,n]of Object.entries(t))ut[e]=_(_({},ut[e]),n)}var _r={en:{instruments_copy:{checkout:{buy_now:"Buy it now"}},error_dialogs:{checkout:{title:"Checkout unavailable",generic_error:"Checkout is currently unavailable due to technical problems. Please try again in a few minutes.",button_text:"Close"},wallet:{title:"%{wallet} unavailable",generic_error:"There was an issue with %{wallet}. Try again or use a different payment method."}},more_payment_options:"More payment options",order_summary:{total:"Total",subtotal:"Subtotal",duties:"Duties",taxes:"Taxes",shipping:"Shipping",discount:"Discount"},brand:{apple_pay:"Apple Pay"},errors:{missing:{address2:"Enter an apartment, suite, etc.",phone:"Enter a phone number",first_name:"Enter a first name"},invalid:{email:"Enter a valid email",country:"Select a country/region",phone:"Enter a valid phone number"}}}};_r.en;async function vt(){return new lt(_r)}class jt extends Error{constructor(e,n){const r="i18n: Missing or invalid translation '".concat(e,"' in '").concat(n,"'");super(r)}}class Vn extends Error{constructor(e,n,r){const o="i18n: Missing translation template key '".concat(e,"' for '").concat(n,"' in '").concat(r,"'");super(o)}}class Kn extends Error{constructor(e,n,r){const o="i18n: Invalid pluralization for '".concat(e,"':'").concat(n,"' in '").concat(r,"'");super(o)}}var Ae,U,je,Er,Fe,Sr,qe,Pr;const Tt=class Ie{constructor(e){X(this,je),X(this,Fe),X(this,qe),X(this,Ae,void 0),X(this,U,Ie.getDefaultLanguage()),Lt(this,Ae,e)}static getDefaultLanguage(){return"en"}get locale(){return j(this,U)}translate(e,n={}){var r;const o=e.split(".");let i=j(this,Ae)[j(this,U)];try{for(const a of o)switch(typeof i){case"object":i=i[a];break;case"string":case"undefined":throw new jt(e,j(this,U))}if(ke(this,je,Er).call(this,i,n)){if(typeof i=="string")throw new Kn(e,i,j(this,U));i=i[ke(this,Fe,Sr).call(this,i,n.count)]}if(typeof i!="string")throw new jt(e,j(this,U));return ke(this,qe,Pr).call(this,i,n)}catch(a){return S.notify(a),(r=n.defaultValue)!=null?r:e}}};Ae=new WeakMap,U=new WeakMap,je=new WeakSet,Er=function(t,e){return typeof t!="string"&&e.count!=="undefined"},Fe=new WeakSet,Sr=function(t,e){let n=e===1?"one":"other";return e===0&&typeof t!="string"&&t.zero!=="undefined"&&(n="zero"),n},qe=new WeakSet,Pr=function(t,e={}){const n=t.match(/%\{.+?\}/g);return n?n.reduce((r,o)=>{const i=o.replace(/%\{(.*)\}/,"$1");return e[i]?r.replace(o,e[i]):(S.notify(new Vn(i,t,j(this,U))),r)},t):t};let lt=Tt;var C=(t=>(t.CartPage="cart_page",t.CartAjax="cart_ajax",t.ProductPage="product",t.Unknown="unknown",t))(C||{}),W=(t=>(t.Af="AF",t.Ax="AX",t.Al="AL",t.Dz="DZ",t.Ad="AD",t.Ao="AO",t.Ai="AI",t.Ag="AG",t.Ar="AR",t.Am="AM",t.Aw="AW",t.Ac="AC",t.Au="AU",t.At="AT",t.Az="AZ",t.Bs="BS",t.Bh="BH",t.Bd="BD",t.Bb="BB",t.By="BY",t.Be="BE",t.Bz="BZ",t.Bj="BJ",t.Bm="BM",t.Bt="BT",t.Bo="BO",t.Ba="BA",t.Bw="BW",t.Bv="BV",t.Br="BR",t.Io="IO",t.Bn="BN",t.Bg="BG",t.Bf="BF",t.Bi="BI",t.Kh="KH",t.Ca="CA",t.Cv="CV",t.Bq="BQ",t.Ky="KY",t.Cf="CF",t.Td="TD",t.Cl="CL",t.Cn="CN",t.Cx="CX",t.Cc="CC",t.Co="CO",t.Km="KM",t.Cg="CG",t.Cd="CD",t.Ck="CK",t.Cr="CR",t.Hr="HR",t.Cu="CU",t.Cw="CW",t.Cy="CY",t.Cz="CZ",t.Ci="CI",t.Dk="DK",t.Dj="DJ",t.Dm="DM",t.Do="DO",t.Ec="EC",t.Eg="EG",t.Sv="SV",t.Gq="GQ",t.Er="ER",t.Ee="EE",t.Sz="SZ",t.Et="ET",t.Fk="FK",t.Fo="FO",t.Fj="FJ",t.Fi="FI",t.Fr="FR",t.Gf="GF",t.Pf="PF",t.Tf="TF",t.Ga="GA",t.Gm="GM",t.Ge="GE",t.De="DE",t.Gh="GH",t.Gi="GI",t.Gr="GR",t.Gl="GL",t.Gd="GD",t.Gp="GP",t.Gt="GT",t.Gg="GG",t.Gn="GN",t.Gw="GW",t.Gy="GY",t.Ht="HT",t.Hm="HM",t.Va="VA",t.Hn="HN",t.Hk="HK",t.Hu="HU",t.Is="IS",t.In="IN",t.Id="ID",t.Ir="IR",t.Iq="IQ",t.Ie="IE",t.Im="IM",t.Il="IL",t.It="IT",t.Jm="JM",t.Jp="JP",t.Je="JE",t.Jo="JO",t.Kz="KZ",t.Ke="KE",t.Ki="KI",t.Kp="KP",t.Xk="XK",t.Kw="KW",t.Kg="KG",t.La="LA",t.Lv="LV",t.Lb="LB",t.Ls="LS",t.Lr="LR",t.Ly="LY",t.Li="LI",t.Lt="LT",t.Lu="LU",t.Mo="MO",t.Mg="MG",t.Mw="MW",t.My="MY",t.Mv="MV",t.Ml="ML",t.Mt="MT",t.Mq="MQ",t.Mr="MR",t.Mu="MU",t.Yt="YT",t.Mx="MX",t.Md="MD",t.Mc="MC",t.Mn="MN",t.Me="ME",t.Ms="MS",t.Ma="MA",t.Mz="MZ",t.Mm="MM",t.Na="NA",t.Nr="NR",t.Np="NP",t.Nl="NL",t.An="AN",t.Nc="NC",t.Nz="NZ",t.Ni="NI",t.Ne="NE",t.Ng="NG",t.Nu="NU",t.Nf="NF",t.Mk="MK",t.No="NO",t.Om="OM",t.Pk="PK",t.Ps="PS",t.Pa="PA",t.Pg="PG",t.Py="PY",t.Pe="PE",t.Ph="PH",t.Pn="PN",t.Pl="PL",t.Pt="PT",t.Qa="QA",t.Cm="CM",t.Re="RE",t.Ro="RO",t.Ru="RU",t.Rw="RW",t.Bl="BL",t.Sh="SH",t.Kn="KN",t.Lc="LC",t.Mf="MF",t.Pm="PM",t.Ws="WS",t.Sm="SM",t.St="ST",t.Sa="SA",t.Sn="SN",t.Rs="RS",t.Sc="SC",t.Sl="SL",t.Sg="SG",t.Sx="SX",t.Sk="SK",t.Si="SI",t.Sb="SB",t.So="SO",t.Za="ZA",t.Gs="GS",t.Kr="KR",t.Ss="SS",t.Es="ES",t.Lk="LK",t.Vc="VC",t.Sd="SD",t.Sr="SR",t.Sj="SJ",t.Se="SE",t.Ch="CH",t.Sy="SY",t.Tw="TW",t.Tj="TJ",t.Tz="TZ",t.Th="TH",t.Tl="TL",t.Tg="TG",t.Tk="TK",t.To="TO",t.Tt="TT",t.Ta="TA",t.Tn="TN",t.Tr="TR",t.Tm="TM",t.Tc="TC",t.Tv="TV",t.Ug="UG",t.Ua="UA",t.Ae="AE",t.Gb="GB",t.Us="US",t.Um="UM",t.Uy="UY",t.Uz="UZ",t.Vu="VU",t.Ve="VE",t.Vn="VN",t.Vg="VG",t.Wf="WF",t.Eh="EH",t.Ye="YE",t.Zm="ZM",t.Zw="ZW",t.Zz="ZZ",t))(W||{});const Se=[];function Y(t,e,n){window.customElements!=null&&(window.customElements.get(t)||(window.customElements.define(t,e),n!=null&&n.shouldAddToWindow&&Se.push(t)))}function Ar(){var t,e;const n=new URLSearchParams(window.location.search);return((e=(t=n.get("shopify-debug"))!=null?t:n.get("shopifydebug"))!=null?e:"")!==""}function zn(){return new URLSearchParams(window.location.search).get("show")||null}function Cn(){var t;const e=(t=window.Shopify)==null?void 0:t.CartType;let n=C.ProductPage;return window.Shopify?e===C.CartAjax?n=C.CartAjax:e===C.CartPage&&(n=C.CartPage):n=C.Unknown,n}function dt(t){return Number(t).toFixed(2)}function Jn(t){if(!(!t||!t.id||!t.id.includes("gid://shopify/Cart/")))return t.id.replace("gid://shopify/Cart/","")}class Yn extends HTMLElement{constructor(){super(),w(this,"overflow"),this.attachShadow({mode:"open"}),this.overflow=""}async connectedCallback(){const e=await vt();this.render(e);const n=this.shadowRoot,r=n.getElementById("modal");n.querySelectorAll("button").forEach(i=>i.addEventListener("click",this.closeModal.bind(this))),n.getElementById("overlay").addEventListener("click",i=>this.handleOutsideClick(i,r)),document.addEventListener("keydown",this.handleEscapeKey.bind(this));const o=document.createElement("style");o.textContent=On,n.appendChild(o),this.overflow=document.body.style.overflow,document.body.style.overflow="hidden",this.trapFocus(r,n),Y("svg-icon",An)}trapFocus(e,n){const r=e.querySelectorAll("a[href], button"),o=Array.from(r),i=o[0],a=o[o.length-1];e.addEventListener("keydown",s=>{s.key==="Tab"&&!s.shiftKey&&n.activeElement===a&&(s.preventDefault(),i.focus()),s.key==="Tab"&&s.shiftKey&&n.activeElement===i&&(s.preventDefault(),a.focus())}),i.focus()}handleOutsideClick(e,n){n.contains(e.target)||this.closeModal()}handleEscapeKey(e){e.key==="Escape"&&this.closeModal()}closeModal(){document.body.style.overflow=this.overflow,this.remove()}render(e){const n=this.getAttribute("title"),r=e.translate("error_dialogs.checkout.button_text");this.shadowRoot.innerHTML='\n      <div id="overlay">\n        <div id="modal">\n          <header>\n            <span id="title">\n              <svg-icon name="warning" color="red"></svg-icon>\n              '.concat(n,'\n            </span>\n            <button type="button" id="close-icon" aria-label=').concat(r,'>\n              <svg-icon name="close" color="gray"></svg-icon>\n            </button>\n          </header>\n          <div id="content">\n            <p><slot></slot></p>\n          </div>\n          <footer>\n            <button type="button" id="close-button">').concat(r,"</button>\n          </footer>\n        </div>\n      </div>\n    ")}}function wt(t){const e=document.createElement("top-level-modal");e.setAttribute("data-testid","top-level-modal"),e.setAttribute("title",t.translate("error_dialogs.checkout.title")),e.textContent=t.translate("error_dialogs.checkout.generic_error"),document.body.appendChild(e)}async function Xn(t,e){const n=t.translate("brand.".concat(e));if(e===null||n.includes("brand")){wt(t);return}const r=document.createElement("top-level-modal");r.setAttribute("data-testid","top-level-modal"),r.setAttribute("title",t.translate("error_dialogs.wallet.title",{wallet:n})),r.textContent=t.translate("error_dialogs.wallet.generic_error",{wallet:n}),document.body.appendChild(r)}Y("top-level-modal",Yn);class Or extends HTMLElement{get buyerCountry(){return this.getAttribute("buyer-country")}get accessToken(){return this.getAttribute("access-token")}get disabled(){const e=this.getAttribute("disabled");return e==="true"||e===""}set disabled(e){e?this.setAttribute("disabled","true"):this.removeAttribute("disabled")}}class We extends Or{constructor(){super(),w(this,"onRendered"),w(this,"_dataSource"),w(this,"_apiClient"),w(this,"_i18n"),this.onRendered=()=>{}}get dataSource(){return this._dataSource}set dataSource(e){this._dataSource=e}get apiClient(){return this._apiClient}set apiClient(e){this._apiClient=e}get i18n(){return this._i18n}set i18n(e){this._i18n=e}}var Pe={},Ve={},ft=function(t,e){return ft=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])},ft(t,e)};function Tr(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");ft(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var Le=function(){return Le=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},Le.apply(this,arguments)};function Mr(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n}function Ir(t,e,n,r){var o=arguments.length,i=o<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(i=(o<3?a(i):o>3?a(e,n,i):a(e,n))||i);return o>3&&i&&Object.defineProperty(e,n,i),i}function Nr(t,e){return function(n,r){e(n,r,t)}}function Zn(t,e,n,r,o,i){function a(f){if(f!==void 0&&typeof f!="function")throw new TypeError("Function expected");return f}for(var s=r.kind,u=s==="getter"?"get":s==="setter"?"set":"value",c=!e&&t?r.static?t:t.prototype:null,p=e||(c?Object.getOwnPropertyDescriptor(c,r.name):{}),m,b=!1,d=n.length-1;d>=0;d--){var v={};for(var l in r)v[l]=l==="access"?{}:r[l];for(var l in r.access)v.access[l]=r.access[l];v.addInitializer=function(f){if(b)throw new TypeError("Cannot add initializers after decoration has completed");i.push(a(f||null))};var h=(0,n[d])(s==="accessor"?{get:p.get,set:p.set}:p[u],v);if(s==="accessor"){if(h===void 0)continue;if(h===null||typeof h!="object")throw new TypeError("Object expected");(m=a(h.get))&&(p.get=m),(m=a(h.set))&&(p.set=m),(m=a(h.init))&&o.unshift(m)}else(m=a(h))&&(s==="field"?o.unshift(m):p[u]=m)}c&&Object.defineProperty(c,r.name,p),b=!0}function Qn(t,e,n){for(var r=arguments.length>2,o=0;o<e.length;o++)n=r?e[o].call(t,n):e[o].call(t);return r?n:void 0}function ea(t){return typeof t=="symbol"?t:"".concat(t)}function ta(t,e,n){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:n?"".concat(n," ",e):e})}function kr(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function Rr(t,e,n,r){function o(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function s(p){try{c(r.next(p))}catch(m){a(m)}}function u(p){try{c(r.throw(p))}catch(m){a(m)}}function c(p){p.done?i(p.value):o(p.value).then(s,u)}c((r=r.apply(t,e||[])).next())})}function xr(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(c){return function(p){return u([c,p])}}function u(c){if(r)throw new TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(n=0)),n;)try{if(r=1,o&&(i=c[0]&2?o.return:c[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,c[1])).done)return i;switch(o=0,i&&(c=[c[0]&2,i.value]),c[0]){case 0:case 1:i=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,o=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){n.label=c[1];break}if(c[0]===6&&n.label<i[1]){n.label=i[1],i=c;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(c);break}i[2]&&n.ops.pop(),n.trys.pop();continue}c=e.call(t,n)}catch(p){c=[6,p],o=0}finally{r=i=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}var Ke=Object.create?function(t,e,n,r){r===void 0&&(r=n);var o=Object.getOwnPropertyDescriptor(e,n);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,o)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]};function Dr(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&Ke(e,t,n)}function $e(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function _t(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),o,i=[],a;try{for(;(e===void 0||e-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return i}function Br(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(_t(arguments[e]));return t}function Lr(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),o=0,e=0;e<n;e++)for(var i=arguments[e],a=0,s=i.length;a<s;a++,o++)r[o]=i[a];return r}function $r(t,e,n){if(n||arguments.length===2)for(var r=0,o=e.length,i;r<o;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))}function re(t){return this instanceof re?(this.v=t,this):new re(t)}function Ur(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),o,i=[];return o={},a("next"),a("throw"),a("return"),o[Symbol.asyncIterator]=function(){return this},o;function a(b){r[b]&&(o[b]=function(d){return new Promise(function(v,l){i.push([b,d,v,l])>1||s(b,d)})})}function s(b,d){try{u(r[b](d))}catch(v){m(i[0][3],v)}}function u(b){b.value instanceof re?Promise.resolve(b.value.v).then(c,p):m(i[0][2],b)}function c(b){s("next",b)}function p(b){s("throw",b)}function m(b,d){b(d),i.shift(),i.length&&s(i[0][0],i[0][1])}}function jr(t){var e,n;return e={},r("next"),r("throw",function(o){throw o}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(o,i){e[o]=t[o]?function(a){return(n=!n)?{value:re(t[o](a)),done:!1}:i?i(a):a}:i}}function Fr(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof $e=="function"?$e(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=t[i]&&function(a){return new Promise(function(s,u){a=t[i](a),o(s,u,a.done,a.value)})}}function o(i,a,s,u){Promise.resolve(u).then(function(c){i({value:c,done:s})},a)}}function qr(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}var ra=Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e};function Gr(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&Ke(e,t,n);return ra(e,t),e}function Hr(t){return t&&t.__esModule?t:{default:t}}function Wr(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)}function Vr(t,e,n,r,o){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!o:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?o.call(t,n):o?o.value=n:e.set(t,n),n}function Kr(t,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof t=="function"?e===t:t.has(e)}function zr(t,e,n){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var r;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=e[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=e[Symbol.dispose]}if(typeof r!="function")throw new TypeError("Object not disposable.");t.stack.push({value:e,dispose:r,async:n})}else n&&t.stack.push({async:!0});return e}var na=typeof SuppressedError=="function"?SuppressedError:function(t,e,n){var r=new Error(n);return r.name="SuppressedError",r.error=t,r.suppressed=e,r};function Cr(t){function e(r){t.error=t.hasError?new na(r,t.error,"An error was suppressed during disposal."):r,t.hasError=!0}function n(){for(;t.stack.length;){var r=t.stack.pop();try{var o=r.dispose&&r.dispose.call(r.value);if(r.async)return Promise.resolve(o).then(n,function(i){return e(i),n()})}catch(i){e(i)}}if(t.hasError)throw t.error}return n()}const aa={__extends:Tr,__assign:Le,__rest:Mr,__decorate:Ir,__param:Nr,__metadata:kr,__awaiter:Rr,__generator:xr,__createBinding:Ke,__exportStar:Dr,__values:$e,__read:_t,__spread:Br,__spreadArrays:Lr,__spreadArray:$r,__await:re,__asyncGenerator:Ur,__asyncDelegator:jr,__asyncValues:Fr,__makeTemplateObject:qr,__importStar:Gr,__importDefault:Hr,__classPrivateFieldGet:Wr,__classPrivateFieldSet:Vr,__classPrivateFieldIn:Kr,__addDisposableResource:zr,__disposeResources:Cr},oa=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:zr,get __assign(){return Le},__asyncDelegator:jr,__asyncGenerator:Ur,__asyncValues:Fr,__await:re,__awaiter:Rr,__classPrivateFieldGet:Wr,__classPrivateFieldIn:Kr,__classPrivateFieldSet:Vr,__createBinding:Ke,__decorate:Ir,__disposeResources:Cr,__esDecorate:Zn,__exportStar:Dr,__extends:Tr,__generator:xr,__importDefault:Hr,__importStar:Gr,__makeTemplateObject:qr,__metadata:kr,__param:Nr,__propKey:ea,__read:_t,__rest:Mr,__runInitializers:Qn,__setFunctionName:ta,__spread:Br,__spreadArray:$r,__spreadArrays:Lr,__values:$e,default:aa},Symbol.toStringTag,{value:"Module"})),Oe=Mn(oa);var M={};Object.defineProperty(M,"__esModule",{value:!0}),M.extractDomain=M.PRODUCTION_CANADA_ENDPOINT=M.PRODUCE_ENDPOINT=M.PRODUCE_BATCH_ENDPOINT=M.PRODUCTION_DOMAIN=M.DEVELOPMENT_DOMAIN=void 0,M.DEVELOPMENT_DOMAIN="http://localhost:8082",M.PRODUCTION_DOMAIN="https://monorail-edge.shopifysvc.com",M.PRODUCE_BATCH_ENDPOINT="/unstable/produce_batch",M.PRODUCE_ENDPOINT="/v1/produce",M.PRODUCTION_CANADA_ENDPOINT="https://monorail-edge-ca.shopifycloud.com/v1/produce";function ia(t){return"https://".concat(new URL(t).hostname)}M.extractDomain=ia;var ze={},Ce={};Object.defineProperty(Ce,"__esModule",{value:!0}),Ce.isCompositeMonorailEvent=void 0;function sa(t){return t.schemaId!==void 0}Ce.isCompositeMonorailEvent=sa,Object.defineProperty(ze,"__esModule",{value:!0}),ze.ProducerMiddleware=void 0;var ca=Ce,ua=function(){function t(e){this.producer=e}return t.prototype.do=function(e,n){return(0,ca.isCompositeMonorailEvent)(e)?this.producer.produce(e):this.producer.produceBatch(e)},t}();ze.ProducerMiddleware=ua;var Te={},ot={},ie={},Re={},Ft;function Jr(){if(Ft)return Re;Ft=1,Object.defineProperty(Re,"__esModule",{value:!0}),Re.default=n;let t;const e=new Uint8Array(16);function n(){if(!t&&(t=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!t))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return t(e)}return Re}var Q={},se={},ce={},qt;function la(){if(qt)return ce;qt=1,Object.defineProperty(ce,"__esModule",{value:!0}),ce.default=void 0;var t=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;return ce.default=t,ce}var Gt;function Je(){if(Gt)return se;Gt=1,Object.defineProperty(se,"__esModule",{value:!0}),se.default=void 0;var t=e(la());function e(o){return o&&o.__esModule?o:{default:o}}function n(o){return typeof o=="string"&&t.default.test(o)}var r=n;return se.default=r,se}var Ht;function Ye(){if(Ht)return Q;Ht=1,Object.defineProperty(Q,"__esModule",{value:!0}),Q.default=void 0,Q.unsafeStringify=r;var t=e(Je());function e(a){return a&&a.__esModule?a:{default:a}}const n=[];for(let a=0;a<256;++a)n.push((a+256).toString(16).slice(1));function r(a,s=0){return(n[a[s+0]]+n[a[s+1]]+n[a[s+2]]+n[a[s+3]]+"-"+n[a[s+4]]+n[a[s+5]]+"-"+n[a[s+6]]+n[a[s+7]]+"-"+n[a[s+8]]+n[a[s+9]]+"-"+n[a[s+10]]+n[a[s+11]]+n[a[s+12]]+n[a[s+13]]+n[a[s+14]]+n[a[s+15]]).toLowerCase()}function o(a,s=0){const u=r(a,s);if(!(0,t.default)(u))throw TypeError("Stringified UUID is invalid");return u}var i=o;return Q.default=i,Q}var Wt;function da(){if(Wt)return ie;Wt=1,Object.defineProperty(ie,"__esModule",{value:!0}),ie.default=void 0;var t=n(Jr()),e=Ye();function n(c){return c&&c.__esModule?c:{default:c}}let r,o,i=0,a=0;function s(c,p,m){let b=p&&m||0;const d=p||new Array(16);c=c||{};let v=c.node||r,l=c.clockseq!==void 0?c.clockseq:o;if(v==null||l==null){const E=c.random||(c.rng||t.default)();v==null&&(v=r=[E[0]|1,E[1],E[2],E[3],E[4],E[5]]),l==null&&(l=o=(E[6]<<8|E[7])&16383)}let h=c.msecs!==void 0?c.msecs:Date.now(),f=c.nsecs!==void 0?c.nsecs:a+1;const y=h-i+(f-a)/1e4;if(y<0&&c.clockseq===void 0&&(l=l+1&16383),(y<0||h>i)&&c.nsecs===void 0&&(f=0),f>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");i=h,a=f,o=l,h+=122192928e5;const g=((h&268435455)*1e4+f)%4294967296;d[b++]=g>>>24&255,d[b++]=g>>>16&255,d[b++]=g>>>8&255,d[b++]=g&255;const O=h/4294967296*1e4&268435455;d[b++]=O>>>8&255,d[b++]=O&255,d[b++]=O>>>24&15|16,d[b++]=O>>>16&255,d[b++]=l>>>8|128,d[b++]=l&255;for(let E=0;E<6;++E)d[b+E]=v[E];return p||(0,e.unsafeStringify)(d)}var u=s;return ie.default=u,ie}var ue={},F={},le={},Vt;function Yr(){if(Vt)return le;Vt=1,Object.defineProperty(le,"__esModule",{value:!0}),le.default=void 0;var t=e(Je());function e(o){return o&&o.__esModule?o:{default:o}}function n(o){if(!(0,t.default)(o))throw TypeError("Invalid UUID");let i;const a=new Uint8Array(16);return a[0]=(i=parseInt(o.slice(0,8),16))>>>24,a[1]=i>>>16&255,a[2]=i>>>8&255,a[3]=i&255,a[4]=(i=parseInt(o.slice(9,13),16))>>>8,a[5]=i&255,a[6]=(i=parseInt(o.slice(14,18),16))>>>8,a[7]=i&255,a[8]=(i=parseInt(o.slice(19,23),16))>>>8,a[9]=i&255,a[10]=(i=parseInt(o.slice(24,36),16))/1099511627776&255,a[11]=i/4294967296&255,a[12]=i>>>24&255,a[13]=i>>>16&255,a[14]=i>>>8&255,a[15]=i&255,a}var r=n;return le.default=r,le}var Kt;function Xr(){if(Kt)return F;Kt=1,Object.defineProperty(F,"__esModule",{value:!0}),F.URL=F.DNS=void 0,F.default=a;var t=Ye(),e=n(Yr());function n(s){return s&&s.__esModule?s:{default:s}}function r(s){s=unescape(encodeURIComponent(s));const u=[];for(let c=0;c<s.length;++c)u.push(s.charCodeAt(c));return u}const o="6ba7b810-9dad-11d1-80b4-00c04fd430c8";F.DNS=o;const i="6ba7b811-9dad-11d1-80b4-00c04fd430c8";F.URL=i;function a(s,u,c){function p(m,b,d,v){var l;if(typeof m=="string"&&(m=r(m)),typeof b=="string"&&(b=(0,e.default)(b)),((l=b)===null||l===void 0?void 0:l.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let h=new Uint8Array(16+m.length);if(h.set(b),h.set(m,b.length),h=c(h),h[6]=h[6]&15|u,h[8]=h[8]&63|128,d){v=v||0;for(let f=0;f<16;++f)d[v+f]=h[f];return d}return(0,t.unsafeStringify)(h)}try{p.name=s}catch(m){}return p.DNS=o,p.URL=i,p}return F}var de={},zt;function fa(){if(zt)return de;zt=1,Object.defineProperty(de,"__esModule",{value:!0}),de.default=void 0;function t(d){if(typeof d=="string"){const v=unescape(encodeURIComponent(d));d=new Uint8Array(v.length);for(let l=0;l<v.length;++l)d[l]=v.charCodeAt(l)}return e(r(o(d),d.length*8))}function e(d){const v=[],l=d.length*32,h="0123456789abcdef";for(let f=0;f<l;f+=8){const y=d[f>>5]>>>f%32&255,g=parseInt(h.charAt(y>>>4&15)+h.charAt(y&15),16);v.push(g)}return v}function n(d){return(d+64>>>9<<4)+14+1}function r(d,v){d[v>>5]|=128<<v%32,d[n(v)-1]=v;let l=1732584193,h=-271733879,f=-1732584194,y=271733878;for(let g=0;g<d.length;g+=16){const O=l,E=h,A=f,D=y;l=u(l,h,f,y,d[g],7,-680876936),y=u(y,l,h,f,d[g+1],12,-389564586),f=u(f,y,l,h,d[g+2],17,606105819),h=u(h,f,y,l,d[g+3],22,-1044525330),l=u(l,h,f,y,d[g+4],7,-176418897),y=u(y,l,h,f,d[g+5],12,1200080426),f=u(f,y,l,h,d[g+6],17,-1473231341),h=u(h,f,y,l,d[g+7],22,-45705983),l=u(l,h,f,y,d[g+8],7,1770035416),y=u(y,l,h,f,d[g+9],12,-1958414417),f=u(f,y,l,h,d[g+10],17,-42063),h=u(h,f,y,l,d[g+11],22,-1990404162),l=u(l,h,f,y,d[g+12],7,1804603682),y=u(y,l,h,f,d[g+13],12,-40341101),f=u(f,y,l,h,d[g+14],17,-1502002290),h=u(h,f,y,l,d[g+15],22,1236535329),l=c(l,h,f,y,d[g+1],5,-165796510),y=c(y,l,h,f,d[g+6],9,-1069501632),f=c(f,y,l,h,d[g+11],14,643717713),h=c(h,f,y,l,d[g],20,-373897302),l=c(l,h,f,y,d[g+5],5,-701558691),y=c(y,l,h,f,d[g+10],9,38016083),f=c(f,y,l,h,d[g+15],14,-660478335),h=c(h,f,y,l,d[g+4],20,-405537848),l=c(l,h,f,y,d[g+9],5,568446438),y=c(y,l,h,f,d[g+14],9,-1019803690),f=c(f,y,l,h,d[g+3],14,-187363961),h=c(h,f,y,l,d[g+8],20,1163531501),l=c(l,h,f,y,d[g+13],5,-1444681467),y=c(y,l,h,f,d[g+2],9,-51403784),f=c(f,y,l,h,d[g+7],14,1735328473),h=c(h,f,y,l,d[g+12],20,-1926607734),l=p(l,h,f,y,d[g+5],4,-378558),y=p(y,l,h,f,d[g+8],11,-2022574463),f=p(f,y,l,h,d[g+11],16,1839030562),h=p(h,f,y,l,d[g+14],23,-35309556),l=p(l,h,f,y,d[g+1],4,-1530992060),y=p(y,l,h,f,d[g+4],11,1272893353),f=p(f,y,l,h,d[g+7],16,-155497632),h=p(h,f,y,l,d[g+10],23,-1094730640),l=p(l,h,f,y,d[g+13],4,681279174),y=p(y,l,h,f,d[g],11,-358537222),f=p(f,y,l,h,d[g+3],16,-722521979),h=p(h,f,y,l,d[g+6],23,76029189),l=p(l,h,f,y,d[g+9],4,-640364487),y=p(y,l,h,f,d[g+12],11,-421815835),f=p(f,y,l,h,d[g+15],16,530742520),h=p(h,f,y,l,d[g+2],23,-995338651),l=m(l,h,f,y,d[g],6,-198630844),y=m(y,l,h,f,d[g+7],10,1126891415),f=m(f,y,l,h,d[g+14],15,-1416354905),h=m(h,f,y,l,d[g+5],21,-57434055),l=m(l,h,f,y,d[g+12],6,1700485571),y=m(y,l,h,f,d[g+3],10,-1894986606),f=m(f,y,l,h,d[g+10],15,-1051523),h=m(h,f,y,l,d[g+1],21,-2054922799),l=m(l,h,f,y,d[g+8],6,1873313359),y=m(y,l,h,f,d[g+15],10,-30611744),f=m(f,y,l,h,d[g+6],15,-1560198380),h=m(h,f,y,l,d[g+13],21,1309151649),l=m(l,h,f,y,d[g+4],6,-145523070),y=m(y,l,h,f,d[g+11],10,-1120210379),f=m(f,y,l,h,d[g+2],15,718787259),h=m(h,f,y,l,d[g+9],21,-343485551),l=i(l,O),h=i(h,E),f=i(f,A),y=i(y,D)}return[l,h,f,y]}function o(d){if(d.length===0)return[];const v=d.length*8,l=new Uint32Array(n(v));for(let h=0;h<v;h+=8)l[h>>5]|=(d[h/8]&255)<<h%32;return l}function i(d,v){const l=(d&65535)+(v&65535);return(d>>16)+(v>>16)+(l>>16)<<16|l&65535}function a(d,v){return d<<v|d>>>32-v}function s(d,v,l,h,f,y){return i(a(i(i(v,d),i(h,y)),f),l)}function u(d,v,l,h,f,y,g){return s(v&l|~v&h,d,v,f,y,g)}function c(d,v,l,h,f,y,g){return s(v&h|l&~h,d,v,f,y,g)}function p(d,v,l,h,f,y,g){return s(v^l^h,d,v,f,y,g)}function m(d,v,l,h,f,y,g){return s(l^(v|~h),d,v,f,y,g)}var b=t;return de.default=b,de}var Ct;function pa(){if(Ct)return ue;Ct=1,Object.defineProperty(ue,"__esModule",{value:!0}),ue.default=void 0;var t=n(Xr()),e=n(fa());function n(o){return o&&o.__esModule?o:{default:o}}var r=(0,t.default)("v3",48,e.default);return ue.default=r,ue}var fe={},pe={},Jt;function ha(){if(Jt)return pe;Jt=1,Object.defineProperty(pe,"__esModule",{value:!0}),pe.default=void 0;var t={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};return pe.default=t,pe}var Yt;function ma(){if(Yt)return fe;Yt=1,Object.defineProperty(fe,"__esModule",{value:!0}),fe.default=void 0;var t=r(ha()),e=r(Jr()),n=Ye();function r(a){return a&&a.__esModule?a:{default:a}}function o(a,s,u){if(t.default.randomUUID&&!s&&!a)return t.default.randomUUID();a=a||{};const c=a.random||(a.rng||e.default)();if(c[6]=c[6]&15|64,c[8]=c[8]&63|128,s){u=u||0;for(let p=0;p<16;++p)s[u+p]=c[p];return s}return(0,n.unsafeStringify)(c)}var i=o;return fe.default=i,fe}var he={},me={},Xt;function ya(){if(Xt)return me;Xt=1,Object.defineProperty(me,"__esModule",{value:!0}),me.default=void 0;function t(o,i,a,s){switch(o){case 0:return i&a^~i&s;case 1:return i^a^s;case 2:return i&a^i&s^a&s;case 3:return i^a^s}}function e(o,i){return o<<i|o>>>32-i}function n(o){const i=[1518500249,1859775393,2400959708,3395469782],a=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof o=="string"){const p=unescape(encodeURIComponent(o));o=[];for(let m=0;m<p.length;++m)o.push(p.charCodeAt(m))}else Array.isArray(o)||(o=Array.prototype.slice.call(o));o.push(128);const s=o.length/4+2,u=Math.ceil(s/16),c=new Array(u);for(let p=0;p<u;++p){const m=new Uint32Array(16);for(let b=0;b<16;++b)m[b]=o[p*64+b*4]<<24|o[p*64+b*4+1]<<16|o[p*64+b*4+2]<<8|o[p*64+b*4+3];c[p]=m}c[u-1][14]=(o.length-1)*8/Math.pow(2,32),c[u-1][14]=Math.floor(c[u-1][14]),c[u-1][15]=(o.length-1)*8&4294967295;for(let p=0;p<u;++p){const m=new Uint32Array(80);for(let f=0;f<16;++f)m[f]=c[p][f];for(let f=16;f<80;++f)m[f]=e(m[f-3]^m[f-8]^m[f-14]^m[f-16],1);let b=a[0],d=a[1],v=a[2],l=a[3],h=a[4];for(let f=0;f<80;++f){const y=Math.floor(f/20),g=e(b,5)+t(y,d,v,l)+h+i[y]+m[f]>>>0;h=l,l=v,v=e(d,30)>>>0,d=b,b=g}a[0]=a[0]+b>>>0,a[1]=a[1]+d>>>0,a[2]=a[2]+v>>>0,a[3]=a[3]+l>>>0,a[4]=a[4]+h>>>0}return[a[0]>>24&255,a[0]>>16&255,a[0]>>8&255,a[0]&255,a[1]>>24&255,a[1]>>16&255,a[1]>>8&255,a[1]&255,a[2]>>24&255,a[2]>>16&255,a[2]>>8&255,a[2]&255,a[3]>>24&255,a[3]>>16&255,a[3]>>8&255,a[3]&255,a[4]>>24&255,a[4]>>16&255,a[4]>>8&255,a[4]&255]}var r=n;return me.default=r,me}var Zt;function ga(){if(Zt)return he;Zt=1,Object.defineProperty(he,"__esModule",{value:!0}),he.default=void 0;var t=n(Xr()),e=n(ya());function n(o){return o&&o.__esModule?o:{default:o}}var r=(0,t.default)("v5",80,e.default);return he.default=r,he}var ye={},Qt;function ba(){if(Qt)return ye;Qt=1,Object.defineProperty(ye,"__esModule",{value:!0}),ye.default=void 0;var t="00000000-0000-0000-0000-000000000000";return ye.default=t,ye}var ge={},er;function va(){if(er)return ge;er=1,Object.defineProperty(ge,"__esModule",{value:!0}),ge.default=void 0;var t=e(Je());function e(o){return o&&o.__esModule?o:{default:o}}function n(o){if(!(0,t.default)(o))throw TypeError("Invalid UUID");return parseInt(o.slice(14,15),16)}var r=n;return ge.default=r,ge}var tr;function wa(){return tr||(tr=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"NIL",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"parse",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(t,"v1",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(t,"v3",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(t,"v4",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(t,"v5",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"validate",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"version",{enumerable:!0,get:function(){return a.default}});var e=p(da()),n=p(pa()),r=p(ma()),o=p(ga()),i=p(ba()),a=p(va()),s=p(Je()),u=p(Ye()),c=p(Yr());function p(m){return m&&m.__esModule?m:{default:m}}}(ot)),ot}Object.defineProperty(Te,"__esModule",{value:!0}),Te.v4=void 0;function _a(){return typeof crypto=="object"&&typeof crypto.randomUUID=="function"?crypto.randomUUID():wa().v4()}Te.v4=_a;var Xe={},G={};Object.defineProperty(G,"__esModule",{value:!0}),G.toUnderscoreCase=G.convertAllEventsToUnderscoreCase=G.convertStringToUnderscoreCase=void 0;var rr=Oe;function pt(t,e){return e===void 0&&(e=!0),t&&Object.keys(t).length&&e?Object.keys(t).map(function(n){var r;return r={},r[Zr(n)]=t[n],r}).reduce(function(n,r){return rr.__assign(rr.__assign({},n),r)}):t}G.toUnderscoreCase=pt;function Zr(t){return t.split(/(?=[A-Z])/).join("_").toLowerCase()}G.convertStringToUnderscoreCase=Zr;function Ea(t){return t.events.map(function(e){var n=!0,r=!0;return e&&e.options&&Object.prototype.hasOwnProperty.call(e.options,"convertEventCase")&&(n=!!e.options.convertEventCase),e&&e.options&&Object.prototype.hasOwnProperty.call(e.options,"convertMetaDataCase")&&(r=!!e.options.convertMetaDataCase),{schema_id:e.schemaId,payload:pt(e.payload,n),metadata:pt(e.metadata,r)}})}G.convertAllEventsToUnderscoreCase=Ea;var N={};Object.defineProperty(N,"__esModule",{value:!0}),N.MonorailRetriesExceededError=N.MonorailRequestError=N.MonorailBatchProduceError=N.MonorailUnableToProduceError=void 0;var Ze=Oe,Sa=function(t){Ze.__extends(e,t);function e(n){var r=t.call(this,"Error producing to the Monorail Edge. Response received: ".concat(JSON.stringify(n)))||this;return r.response=n,Object.setPrototypeOf(r,e.prototype),r}return e}(Error);N.MonorailUnableToProduceError=Sa;var Pa=function(t){Ze.__extends(e,t);function e(n){var r=t.call(this,"Error producing to the Monorail Edge. Response received: ".concat(JSON.stringify(n)))||this;return Object.setPrototypeOf(r,e.prototype),r.response=n,r}return e}(Error);N.MonorailBatchProduceError=Pa;var Aa=function(t){Ze.__extends(e,t);function e(n){var r=t.call(this,"Error completing request. A network failure may have prevented the request from completing. Error: ".concat(n))||this;return Object.setPrototypeOf(r,e.prototype),r}return e}(Error);N.MonorailRequestError=Aa;var Oa=function(t){Ze.__extends(e,t);function e(n){var r=t.call(this,"".concat(n))||this;return Object.setPrototypeOf(r,e.prototype),r}return e}(Error);N.MonorailRetriesExceededError=Oa,Object.defineProperty(Xe,"__esModule",{value:!0}),Xe.HttpProducer=void 0;var xe=Oe,De=M,it=G,Ta=Te,q=N,Ma=function(){function t(e,n){e===void 0&&(e=De.DEVELOPMENT_DOMAIN),n===void 0&&(n=!1),this.edgeDomain=e,this.keepalive=n}return t.withEndpoint=function(e){return new t(De.extractDomain(e))},t.getHeadersFromMetadata=function(e){var n={"Content-Type":"application/json; charset=utf-8","X-Monorail-Edge-Event-Created-At-Ms":(e&&e.eventCreatedAtMs||Date.now()).toString(),"X-Monorail-Edge-Event-Sent-At-Ms":Date.now().toString(),"X-Monorail-Edge-Client-Message-Id":(e&&e.clientMessageId||(0,Ta.v4)()).toString()};return e&&e.userAgent&&(n["User-Agent"]=e.userAgent),e&&e.remoteIp&&(n["X-Forwarded-For"]=e.remoteIp),n},t.prototype.produceBatch=function(e){return xe.__awaiter(this,void 0,void 0,function(){var n,r,o,i,a,s;return xe.__generator(this,function(u){switch(u.label){case 0:n={events:(0,it.convertAllEventsToUnderscoreCase)(e),metadata:(0,it.toUnderscoreCase)(e.metadata)},u.label=1;case 1:return u.trys.push([1,3,,4]),[4,fetch(this.produceBatchEndpoint(),{method:"post",headers:t.getHeadersFromMetadata(e.metadata),body:JSON.stringify(n),keepalive:this.keepalive})];case 2:return r=u.sent(),[3,4];case 3:throw o=u.sent(),new q.MonorailRequestError(o);case 4:return r.status!==207?[3,6]:[4,r.json()];case 5:throw i=u.sent(),new q.MonorailBatchProduceError(i);case 6:return r.ok?[3,8]:(a=q.MonorailUnableToProduceError.bind,s={status:r.status},[4,r.text()]);case 7:throw new(a.apply(q.MonorailUnableToProduceError,[void 0,(s.message=u.sent(),s)]));case 8:return[2,{status:r.status}]}})})},t.prototype.produce=function(e){return xe.__awaiter(this,void 0,void 0,function(){var n,r,o,i,a,s;return xe.__generator(this,function(u){switch(u.label){case 0:n=!0,e&&e.options&&Object.prototype.hasOwnProperty.call(e.options,"convertEventCase")&&(n=!!e.options.convertEventCase),r={schema_id:e.schemaId,payload:(0,it.toUnderscoreCase)(e.payload,n)},u.label=1;case 1:return u.trys.push([1,3,,4]),[4,fetch(this.produceEndpoint(),{method:"post",headers:t.getHeadersFromMetadata(e.metadata),body:JSON.stringify(r),keepalive:this.keepalive})];case 2:return o=u.sent(),[3,4];case 3:throw i=u.sent(),new q.MonorailRequestError(i);case 4:if(!o)throw new q.MonorailUnableToProduceError({message:"No response from edge"});return o.ok?[3,6]:(a=q.MonorailUnableToProduceError.bind,s={status:o.status},[4,o.text()]);case 5:throw new(a.apply(q.MonorailUnableToProduceError,[void 0,(s.message=u.sent(),s)]));case 6:return[2,{status:o.status}]}})})},t.prototype.produceBatchEndpoint=function(){return this.edgeDomain+De.PRODUCE_BATCH_ENDPOINT},t.prototype.produceEndpoint=function(){return this.edgeDomain+De.PRODUCE_ENDPOINT},t}();Xe.HttpProducer=Ma;var Qe={};Object.defineProperty(Qe,"__esModule",{value:!0}),Qe.LogProducer=void 0;var Ia=function(){function t(e){this.sendToConsole=e,e&&t.printWelcomeMessage(e)}return t.printWelcomeMessage=function(e){console.log("%c\u{1F44B} from Monorail%c\n\n"+"We've noticed that you're".concat(e?"":" not"," ")+"running in debug mode. "+"As such, we will ".concat(e?"produce":"not produce"," ")+"Monorail events to the console. "+"\n\nIf you want Monorail events to ".concat(e?"stop":"start"," ")+"appearing here, %cset debugMode=".concat((!e).toString(),"%c, ")+"for the Monorail Log Producer in your code.","font-size: large;","font-size: normal;","font-weight: bold;","font-weight: normal;")},t.prototype.produce=function(e){return this.sendToConsole&&console.log("Monorail event produced",e),new Promise(function(n){n(e)})},t.prototype.produceBatch=function(e){return this.sendToConsole&&console.log("Monorail Batch event produced",e),new Promise(function(n){n(e)})},t}();Qe.LogProducer=Ia,Object.defineProperty(Ve,"__esModule",{value:!0}),Ve.Monorail=void 0;var Na=Oe,nr=M,ka=ze,Ra=Te,st=Xe,xa=Qe,Da=function(){function t(e,n){this.producer=e,this.middleware=n,this.executeChain=t.buildMiddlewareChain(this.middleware.concat(new ka.ProducerMiddleware(e)))}return t.createLogProducer=function(e){return new t(new xa.LogProducer(e.debugMode),e.middleware||[])},t.createHttpProducerWithEndpoint=function(e,n){return n===void 0&&(n=[]),new t(st.HttpProducer.withEndpoint(e),n)},t.createHttpProducer=function(e){var n=e.options&&e.options.keepalive;return new t(e.production?new st.HttpProducer(nr.PRODUCTION_DOMAIN,n):new st.HttpProducer(nr.DEVELOPMENT_DOMAIN,n),e.middleware||[])},t.buildMiddlewareChain=function(e,n){var r=this;return n===void 0&&(n=0),n===e.length?this.identityFn:function(o){return e[n].do(o,r.buildMiddlewareChain(e,n+1))}},t.prototype.produce=function(e){return e.metadata=Na.__assign({eventCreatedAtMs:Date.now(),clientMessageId:(0,Ra.v4)()},e.metadata),this.executeChain(e)},t.prototype.produceBatch=function(e){return this.executeChain(e)},t}();Ve.Monorail=Da;var et={};Object.defineProperty(et,"__esModule",{value:!0}),et.RetryMiddleware=void 0;var ar=Oe,or=N,Ba=function(){function t(e,n){e===void 0&&(e=3),n===void 0&&(n=150),this.maxRetries=e,this.delayMs=n}return t.prototype.do=function(e,n){return ar.__awaiter(this,void 0,void 0,function(){var r,o,i,a,s;return ar.__generator(this,function(u){switch(u.label){case 0:r=0,u.label=1;case 1:if(!(r<this.maxRetries))return[3,7];i=void 0,u.label=2;case 2:return u.trys.push([2,4,,6]),[4,n(e)];case 3:return i=u.sent(),[3,6];case 4:if(a=u.sent(),o=o||new Error,o=new Error("".concat(o.message," Retry count:").concat(r+1," Error msg:").concat(a.message,"\n")),a instanceof or.MonorailUnableToProduceError&&(s=a.response.status,s&&s>=400&&s<500))throw a;return[4,this.delay(this.delayMs*Math.pow(2,r))];case 5:return u.sent(),r++,[3,1];case 6:return[2,i];case 7:throw o?o.message="Retry count of ".concat(this.maxRetries," exceeded. Failed with error: \n").concat(o.message," Aborting request for ").concat(JSON.stringify(e)):o=new Error,new or.MonorailRetriesExceededError(o)}})})},t.prototype.delay=function(e){return new Promise(function(n){return setTimeout(n,e)})},t}();et.RetryMiddleware=Ba,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.RetryMiddleware=t.MonorailRetriesExceededError=t.MonorailUnableToProduceError=t.MonorailRequestError=t.Monorail=void 0;var e=Ve;Object.defineProperty(t,"Monorail",{enumerable:!0,get:function(){return e.Monorail}});var n=N;Object.defineProperty(t,"MonorailRequestError",{enumerable:!0,get:function(){return n.MonorailRequestError}}),Object.defineProperty(t,"MonorailUnableToProduceError",{enumerable:!0,get:function(){return n.MonorailUnableToProduceError}}),Object.defineProperty(t,"MonorailRetriesExceededError",{enumerable:!0,get:function(){return n.MonorailRetriesExceededError}});var r=et;Object.defineProperty(t,"RetryMiddleware",{enumerable:!0,get:function(){return r.RetryMiddleware}})}(Pe);const La=["Chrome-Lighthouse"];function $a(){const t=navigator.userAgent;return La.some(e=>t.includes(e))}class Ua extends Error{constructor(e){super(e),w(this,"name","MonorailProducerError"),w(this,"code","monorail_producer_error")}}function*ja(){yield Pe.Monorail.createHttpProducer({production:!0}),Ar()&&(yield Pe.Monorail.createLogProducer({debugMode:!0}))}const Fa=[...ja()];function qa(t){var e;return!(t instanceof Pe.MonorailRequestError)&&!((e=t==null?void 0:t.message)!=null&&e.includes("Invalid agent:"))}async function Ga(t,e){if($a())return;S.leaveBreadcrumb("monorail event produced to ".concat(t.schemaId),"manual",t);const n=[];if(await Promise.all(Fa.map(async o=>{try{await o.produce(t)}catch(i){n.push(i)}})),n.length===0)return;const r=n.sort(o=>o instanceof Pe.MonorailRequestError?1:-1)[0];if(e==null||e(r),qa(r)){const o=r instanceof Error?r:new Ua(Ha(r));S.notify(o)}}function Ha(t){try{return JSON.stringify(t)}catch(e){return t.toString()}}const ir="shopify_wallet_checkout_track/6.1";async function V(t,e){var n,r,o,i,a,s,u,c,p,m,b,d;(r=(n=window==null?void 0:window.ShopifyAnalytics)==null?void 0:n.lib)!=null&&r.trekkie||await new Promise(Nt=>{const xt=setInterval(()=>{var Rt,Me;(Me=(Rt=window==null?void 0:window.ShopifyAnalytics)==null?void 0:Rt.lib)!=null&&Me.trekkie&&(clearInterval(xt),Nt())},100),_i=setTimeout(()=>{clearInterval(xt),clearTimeout(_i),Nt()},7e3)});const v=(a=(i=(o=window.ShopifyAnalytics)==null?void 0:o.lib)==null?void 0:i.trekkie)==null?void 0:a.defaultAttributes,l={uniqToken:(s=v==null?void 0:v.uniqToken)!=null?s:"",visitToken:(u=v==null?void 0:v.visitToken)!=null?u:"",microSessionId:(c=v==null?void 0:v.microSessionId)!=null?c:"",microSessionCount:(p=v==null?void 0:v.microSessionCount)!=null?p:0,shopId:(m=v==null?void 0:v.shopId)!=null?m:0,themeId:v==null?void 0:v.themeId,themeCityHash:(b=v==null?void 0:v.themeCityHash)!=null?b:"",contentLanguage:(d=v==null?void 0:v.contentLanguage)!=null?d:"",referer:v==null?void 0:v.referer},{uniqToken:h,visitToken:f,microSessionId:y,microSessionCount:g,shopId:O,themeId:E,themeCityHash:A,contentLanguage:D,referer:R}=l,{event:K,eventSubtype:kt,checkoutToken:Mt,instrumentId:wi,ttl:Ci}=t,It={schemaId:ir,payload:{event:K,eventSubtype:kt,checkoutToken:Mt,appName:"storefront",pageType:Cn(),instrumentId:wi,ttl:Ci,uniqToken:h,visitToken:f,microSessionId:y,microSessionCount:g,shopId:O,themeId:E,themeCityHash:A,contentLanguage:D,referer:R,checkoutOne:!0}};if(!K){S.notify(new Error("Event is required"),{metadata:{request:{monorail:{schemaId:ir,payload:JSON.stringify(It)}}}});return}await Ga(It,e)}var P=(t=>(t.BuyItNow="BuyItNow",t.MoreOptions="MoreOptions",t.ApplePay="ApplePay",t.PayPal="PayPalV5",t.Venmo="Venmo",t.GooglePay="GooglePay",t.ShopPay="ShopifyPay",t.MetaPay="FacebookPay",t))(P||{}),x=(t=>(t.CartInitCalled="portable_wallets_cart_init_called",t.ClickSheetCancelled="portable_wallets_instrument_click_sheet_cancelled",t.ClickSheetFailed="portable_wallets_instrument_click_sheet_failure",t.ClickSheetSuccess="portable_wallets_instrument_click_sheet_success",t.InitCalled="portable_wallets_init_called",t.InitFailed="portable_wallets_init_failed",t.InitSuccess="portable_wallets_init_success",t.UpdateFailed="portable_wallets_instrument_update_failed",t.InstrumentLoaded="portable_wallets_instrument_loaded",t))(x||{});function Wa(t){const e=n=>{n.persisted&&(t(),window.removeEventListener("pageshow",e))};window.addEventListener("pageshow",e)}async function Et({element:t,attribute:e,instrumentName:n,onError:r,dataSource:o}){t.setAttribute(e,"true");try{const i=await o.getCart();if(Wa(()=>{t&&t.removeAttribute(e)}),!i||!i.id)throw new Error("[".concat(n,"] received invalid cart"));if(!i.checkoutUrl)throw new Error("[".concat(n,"] Created cart with no checkout URL"));return i}catch(i){return S.notify(i),t.removeAttribute(e),r==null||r(),null}}class Qr extends We{constructor(){super(...arguments),w(this,"anchor")}static get observedAttributes(){return["disabled"]}async connectedCallback(){this.render()}attributeChangedCallback(e,n,r){n!==r&&e==="disabled"&&this.anchor&&(r?this.anchor.setAttribute("disabled","true"):this.anchor.removeAttribute("disabled"))}async handleClick(e){if(e.preventDefault(),this.disabled||!this.anchor||this.anchor.getAttribute("disabled"))return;const n=await Et({element:this.anchor,attribute:"disabled",instrumentName:P.MoreOptions,onError:()=>wt(this.i18n),dataSource:this.dataSource});n&&window.location.assign(n.checkoutUrl)}render(){this.anchor=document.createElement("a"),this.anchor.href="",this.anchor.textContent=this.i18n.translate("more_payment_options"),this.anchor.className=bt.MORE_PAYMENT_OPTION_BUTTON,this.disabled&&this.anchor.setAttribute("disabled","true"),this.anchor.onclick=e=>this.handleClick(e),this.appendChild(this.anchor)}}Y("more-payment-options-link",Qr);class en extends Or{clearExistingButtons({expectedSkeleton:e}={}){if(!e&&this.innerHTML.length>0){this.innerHTML="";return}e&&!this.innerHTML.includes(e)&&(this.innerHTML="")}get shopId(){return this.getAttribute("shop-id")}get cartId(){return this.getAttribute("cart-id")}get walletConfigs(){return this.getAttribute("wallet-configs")}}const be=Element.prototype;function Va(t){const e=rn(t);return tn(e)}function tn(t){var e;const n=t==null?void 0:t.elements;if(!n)return null;const r=ct(n,"id");if(!r||isNaN(Number(r)))return null;const o=Number((e=ct(n,"quantity"))!=null?e:"1"),i="gid://shopify/ProductVariant/".concat(r),a=ct(n,"selling_plan"),s=a?"gid://shopify/SellingPlan/".concat(a):void 0,u=Ka(t);return{quantity:o,merchandiseId:i,sellingPlanId:s,lineItemProperties:u}}function rn(t){const e=sr(t,"[data-shopify='payment-button']")||document.querySelector("[data-shopify='payment-button']");return sr(e,"form")}function Ka(t){if(!t)return{};const e=document.querySelectorAll('[name^="properties"][form^="'.concat(t.getAttribute("id"),'"]')),n=t.querySelectorAll('[name^="properties"]'),r=[...e,...n],o={};return r.forEach(i=>{const a=za(i),s=Ca(i);a&&typeof s<"u"&&(o[a]=s)}),o}function za(t){const e=t.getAttribute("name");if(e===null)return null;const n=e.indexOf("["),r=e.lastIndexOf("]");return n===-1||r===-1?null:e.substring(n+1,r)}function Ca(t){if(!(["radio","checkbox"].includes(t.type)&&!t.checked)&&!(t.value===""||typeof t.value>"u"))return t.value}function ct(t,e){var n;const r=t.namedItem(e);return r&&"value"in r&&(n=r.value)!=null?n:null}function sr(t,e){if(be.matches=be.matches||be.webkitMatchesSelector||be.msMatchesSelector||be.mozMatchesSelector,!t||t.matches(e))return t;let n=t;for(;n&&n!==document.body;)if(n=n.parentElement,n&&n.matches(e))return n;return null}class Ja{constructor(e,n){w(this,"addToCartMutationObserver"),w(this,"addToCartForm"),w(this,"addToCartButtons"),this.element=e,this.setComponentDisabled=n,this.addToCartMutationObserver=null,this.addToCartForm=null,this.addToCartButtons=[]}setupMutationObservers(){if(this.findAndSetAddToCartButtons(),!this.addToCartForm)return;this.syncComponentStateWithForm();const e=new MutationObserver(()=>this.reobserveOnFormChanges());this.addToCartMutationObserver=new MutationObserver(()=>this.syncComponentStateWithForm()),e.observe(this.addToCartForm,{childList:!0}),this.observeAddToCartButtons()}syncComponentStateWithForm(){if(!this.addToCartForm){this.setComponentDisabled(!0);return}const e=tn(this.addToCartForm),n=!!(this.addToCartButtons.length>0&&this.addToCartButtons.every(r=>r.disabled));this.setComponentDisabled(n||e===null)}observeAddToCartButtons(){this.addToCartButtons.forEach(e=>{this.addToCartMutationObserver.observe(e,{attributes:!0})})}reobserveOnFormChanges(){var e;(e=this.addToCartMutationObserver)==null||e.disconnect(),this.findAndSetAddToCartButtons(),this.observeAddToCartButtons(),this.syncComponentStateWithForm()}findAndSetAddToCartButtons(){this.addToCartForm=rn(this.element),this.addToCartForm&&(this.addToCartButtons=[...this.addToCartForm.querySelectorAll("[type=submit]")])}}var Ya=0;function ae(t){return"__private_"+Ya+++"_"+t}function T(t,e){if(!Object.prototype.hasOwnProperty.call(t,e))throw new TypeError("attempted to use private field on non-instance");return t}function St(t){return Object.entries(t).map(([e,n])=>({key:e,value:{stringValue:String(n)}}))}const nn=1,Xa=Za(5,2,12);function Za(t,e,n){const r=[0];for(let o=0;o<n;o++){const i=Math.floor(t*e**o);r.push(i)}return r}var ve=ae("exporter"),L=ae("attributes"),$=ae("metrics");class Qa{constructor({exporter:e,attributes:n}){Object.defineProperty(this,ve,{writable:!0,value:void 0}),Object.defineProperty(this,L,{writable:!0,value:void 0}),Object.defineProperty(this,$,{writable:!0,value:[]}),T(this,ve)[ve]=e,T(this,L)[L]=n!=null?n:{}}addAttributes(e){T(this,L)[L]=_(_({},T(this,L)[L]),e)}histogram({name:e,value:n,unit:r,bounds:o,attributes:i}){const a=Date.now()*1e6;T(this,$)[$].push({name:e,type:"histogram",value:n,unit:r,timeUnixNano:a,attributes:i,bounds:o})}counter({name:e,value:n,unit:r,attributes:o}){const i=Date.now()*1e6;T(this,$)[$].push({name:e,type:"counter",value:n,unit:r,timeUnixNano:i,attributes:o})}gauge({name:e,value:n,unit:r,attributes:o}){const i=Date.now()*1e6;T(this,$)[$].push({name:e,type:"gauge",value:n,unit:r,timeUnixNano:i,attributes:o})}async exportMetrics(){const e={};T(this,$)[$].forEach(r=>{switch(r.attributes=_(_({},T(this,L)[L]),r.attributes),r.type){case"histogram":eo(e,r);break;case"counter":to(e,r);break;case"gauge":ro(e,r);break}});const n=Object.values(e);n.length!==0&&await T(this,ve)[ve].exportMetrics(n)}}function eo(t,e){var n;const{name:r,value:o,unit:i,timeUnixNano:a,attributes:s}=e,u=(n=e.bounds)!==null&&n!==void 0?n:Xa,c=new Array(u.length+1).fill(0);t[r]||(t[r]={name:r,unit:i||"1",histogram:{aggregationTemporality:nn,dataPoints:[]}});for(let p=0;p<c.length;p++){const m=u[p];if(m===void 0)c[p]=1;else if(o<=m){c[p]=1;break}}t[r].histogram.dataPoints.push({startTimeUnixNano:a,timeUnixNano:a,count:1,sum:o,min:o,max:o,bucketCounts:c,explicitBounds:u,attributes:St(s!=null?s:{})})}function to(t,e){const{name:n,value:r,unit:o,timeUnixNano:i,attributes:a}=e;t[n]||(t[n]={name:n,unit:o||"1",sum:{aggregationTemporality:nn,isMonotonic:!0,dataPoints:[]}}),t[n].sum.dataPoints.push({startTimeUnixNano:i,timeUnixNano:i,asDouble:r,attributes:St(a!=null?a:{})})}function ro(t,e){const{name:n,value:r,unit:o,timeUnixNano:i,attributes:a}=e;t[n]||(t[n]={name:n,unit:o||"1",gauge:{dataPoints:[]}}),t[n].gauge.dataPoints.push({startTimeUnixNano:i,timeUnixNano:i,asDouble:r,attributes:St(a!=null?a:{})})}var we=ae("url"),_e=ae("serviceName"),Ee=ae("logger");class no{constructor(e,n,r){Object.defineProperty(this,we,{writable:!0,value:void 0}),Object.defineProperty(this,_e,{writable:!0,value:void 0}),Object.defineProperty(this,Ee,{writable:!0,value:void 0}),T(this,we)[we]=e,T(this,_e)[_e]=n,T(this,Ee)[Ee]=r==null?void 0:r.logger}async exportMetrics(e){var n;const r={resourceMetrics:[{resource:{attributes:[{key:"service.name",value:{stringValue:T(this,_e)[_e]}}]},scopeMetrics:[{scope:{name:"open-telemetry-mini-client",version:"0.3.3",attributes:[]},metrics:e}]}]},o=await fetch(T(this,we)[we],{method:"POST",keepalive:!0,headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if((n=T(this,Ee)[Ee])===null||n===void 0||n.log({status:o.status}),!o.ok){if(o.status===400){const i=await o.text();throw new Be("Invalid OpenTelemetry Metrics: ".concat(i))}if(o.status===429||o.status===503){const i=await o.json(),a=o.headers.get("Retry-After"),s=a?{seconds:Number(a)}:void 0;throw new Be("Server did not accept metrics",{errorData:i,retryAfter:s,metrics:e})}throw new Be("Server responded with ".concat(o.status))}}}class Be extends Error{constructor(e,n){super(e),this.metadata=void 0,this.name="OpenTelemetryClientError",this.metadata=n}}const ao="https://otlp-http-production.shopifysvc.com/v1/metrics",oo="portable_wallets";class io{constructor(e){this.exporter=e}async exportMetrics(e){var n;try{await this.exporter.exportMetrics(e)}catch(r){if(r instanceof Be){const o=(n=r.metadata)==null?void 0:n.retryAfter;if(o){await new Promise(i=>{setTimeout(()=>{this.exportMetrics(e),i()},o.seconds*1e3)});return}}throw r}}}const so=new no(ao,oo),co=new io(so),ne=new Qa({exporter:co});function uo(){V({event:x.InitCalled})}function lo(t){V({event:t==="success"?x.InitSuccess:x.InitFailed})}function fo({instrument:t,measurement:e}){e!=null&&(ne.histogram({name:"portable_wallets_instrument_load_time",value:e,attributes:{instrument:t},unit:"ms"}),ne.exportMetrics()),V({event:x.InstrumentLoaded,instrumentId:t,ttl:e})}function po({instrument:t,result:e,checkoutToken:n}){ne.counter({name:"portable_wallets_sheet_clicked",value:1,attributes:{instrument:t,result:e}}),ne.exportMetrics(),V({event:e==="success"?x.ClickSheetSuccess:x.ClickSheetFailed,checkoutToken:n,instrumentId:t})}function ho(t,e){V({event:"".concat(x.UpdateFailed,"-").concat(e),instrumentId:t})}function mo(t){ne.counter({name:"portable_wallets_sheet_cancelled",value:1,attributes:{instrument:t}}),ne.exportMetrics(),V({event:x.ClickSheetCancelled,instrumentId:t})}const k={initStarted:uo,initCompleted:lo,instrumentLoaded:fo,sheetClicked:po,updateFailed:ho,sheetCancelled:mo};class yo extends We{constructor(){super(...arguments),w(this,"button"),w(this,"buyNowText","")}static get observedAttributes(){return["disabled"]}async connectedCallback(){try{this.buyNowText=this.i18n.translate("instruments_copy.checkout.buy_now")}catch(e){if(this.i18n===void 0){S.leaveBreadcrumb("BuyItNowButton: tried to render without i18n","error");return}else S.notify(e)}this.render()}attributeChangedCallback(e,n,r){n!==r&&e==="disabled"&&this.button&&(r?this.button.setAttribute("aria-disabled","true"):this.button.removeAttribute("aria-disabled"))}async handleClick(){if(!(this.disabled||!this.button||this.button.getAttribute("aria-disabled")))try{const e=await Et({element:this.button,attribute:"aria-disabled",instrumentName:P.BuyItNow,onError:()=>wt(this.i18n),dataSource:this.dataSource});if(!e)throw new Error("[".concat(P.BuyItNow,"] received invalid cart"));k.sheetClicked({instrument:P.BuyItNow,checkoutToken:Jn(e),result:"success"}),window.location.assign(e.checkoutUrl)}catch(e){S.notify(e),k.sheetClicked({instrument:P.BuyItNow,result:"failed"})}}render(){var e;this.button||(this.button=document.createElement("button"),this.button.type="button"),this.button.textContent=this.buyNowText,this.button.className=bt.UNBRANDED_BUTTON,this.disabled&&this.button.setAttribute("aria-disabled","true"),this.button.onclick=()=>this.handleClick(),this.appendChild(this.button),(e=this.onRendered)==null||e.call(this)}}class Pt{static walletName(){throw new Error("Must define walletName for WalletInstrument subclass")}constructor(e){}createWebComponent({accessToken:e,country:n,disabled:r="false",walletParams:o,dataSource:i,i18n:a,apiClient:s}){const u=this.getWebComponentName();Y(u,this.getWebComponentClass(),{shouldAddToWindow:!0});const c=document.createElement(u),p=_({"access-token":e,"buyer-country":n,disabled:r},o);for(const[m,b]of Object.entries(p))m&&c.setAttribute(m,b||"");return c.dataSource=i,c.apiClient=s,c.i18n=a,c}getWalletParams(){return{}}loadWalletSDK(){return Promise.resolve()}shouldLoadWallet(){return!0}isPartnerSDKEligible(){return!0}}class go extends Pt{static walletName(){return"buy_it_now"}getWebComponentName(){return"shopify-buy-it-now-button"}getInstrumentName(){return P.BuyItNow}getWebComponentClass(){return yo}}class bo extends We{constructor(){super(...arguments),w(this,"sdkButtonsComponent")}async connectedCallback(){var e,n;this.sdkButtonsComponent=(n=(e=window.paypal).Buttons)==null?void 0:n.call(e,{fundingSource:"paypal",style:{color:"gold",label:"paypal",height:54}}),this.render()}disconnectedCallback(){this.sdkButtonsComponent&&this.sdkButtonsComponent.close()}render(){var e;const n=document.createElement("div");(e=this.sdkButtonsComponent)==null||e.render(n),this.appendChild(n)}}const vo="https://www.paypal.com/sdk/js",wo="AftTXN0blRv0ltUpXOXhTWgUgyoMXw83iV54WUwm2VFXevA-_z4oWajYoxeWwZ-Y_mK1kxIBBXG0HqQ1";class _o extends Pt{constructor(e){super(e),w(this,"merchantId");const n=e==null?void 0:e.wallet_params;this.merchantId=n.merchantId}static walletName(){return"paypal"}getWebComponentName(){return"shopify-paypal-button"}getInstrumentName(){return P.PayPal}getWebComponentClass(){return bo}loadWalletSDK(){const e=document.createElement("script"),n=new URL(vo);return n.searchParams.set("client-id",wo),n.searchParams.set("merchant-id",this.merchantId),e.setAttribute("src",n.toString()),new Promise((r,o)=>{e.onload=()=>r(),e.onerror=i=>{document.body.removeChild(e),o(i)},document.body.appendChild(e)})}shouldLoadWallet(){return!0}isPartnerSDKEligible(){var e,n;return!!((n=(e=window==null?void 0:window.paypal)==null?void 0:e.Buttons)!=null&&n.call(e).isEligible())}}const Eo=".apple-pay-button{background-size:100% 60%;background-repeat:no-repeat;background-position:50% 50%}@supports (-webkit-appearance: -apple-pay-button){.apple-pay-button{background-size:auto;background-repeat:repeat;background-position:0;-webkit-appearance:-apple-pay-button!important;-moz-appearance:-apple-pay-button!important;appearance:-apple-pay-button!important;-apple-pay-button-type:plain;height:44px}}\n",ht={UK:W.Gb,JA:W.Jp},an=["AS","GU","MP","PR","VI"];an.forEach(t=>{ht[t]=W.Us});function So(t){var e,n;const r=t.countryCode,o={firstName:t.givenName||void 0,lastName:t.familyName||void 0,address1:(e=t==null?void 0:t.addressLines)==null?void 0:e[0],address2:((n=t==null?void 0:t.addressLines)==null?void 0:n[1])||void 0,city:t.locality||void 0,postalCode:t.postalCode||void 0,zoneCode:t.administrativeArea||t.subLocality||void 0,countryCode:Ao(t.countryCode),phone:t.phoneNumber||void 0};return o.countryCode===W.Hk&&(o.postalCode=void 0,o.zoneCode=t.postalCode),r&&an.includes(r)&&(o.zoneCode=r),o.lastName||(o.lastName=o.firstName),o}function Po(t){return Object.values(W).includes(t)}function Ao(t){if(!t)return W.Zz;const e=t.toUpperCase();return Po(e)?e:Object.keys(ht).includes(e)?ht[e]:W.Zz}function cr(t,e){return ee(t,[e])[0]}function ur({subtotal:t,selectedDeliveryOptions:e,duties:n,taxes:r,discountAllocations:o,i18n:i}){var a;const s=ee(i.translate("order_summary.subtotal"),[t]),u=ee(i.translate("order_summary.shipping"),e.map(b=>({amount:b.estimatedCost.amount}))),c=ee(i.translate("order_summary.duties"),[n]),p=ee(i.translate("order_summary.taxes"),[r]),m=(a=o==null?void 0:o.flatMap(b=>ee(i.translate("order_summary.discount"),[b.discountedAmount],!0)))!=null?a:[];return[...s,...u,...c,...p,...m]}function ee(t,e,n=!1){return e.filter(r=>(r==null?void 0:r.amount)&&(r==null?void 0:r.amount)!==0).map(r=>({label:t,amount:n?"-".concat(dt(r.amount)):dt(r.amount)}))}function Oo(t){return t.map(e=>{var n;return{label:e.title,amount:dt(e.estimatedCost.amount),identifier:e.handle,detail:(n=e.description)!=null?n:""}})}const lr=({paymentSheetAction:t,onProceed:e,terminateSession:n})=>{switch(t.action){case"abort":n();break;case"show_error":e(t.errors);break;case"update":e(t.errors);break;default:throw new Error('Missing handler for payment sheet action "'.concat(t.action,'"'))}},To=["abort","show_error","complete","update"];class Mo{constructor(){w(this,"generatePrioritizedPaymentSheetAction",e=>{let n;const r=[],o=[],i=[];for(const s of Object.keys(e)){const u=e[s]();u.effects&&o.push(...u.effects),u.action!=="complete"&&u.errors&&i.push(...u.errors),r.push(u)}const a=(s=>To.map(u=>s.find(c=>c.action===u)).find(u=>!!u))(r);return a&&(n=a,n.effects=o,n.action!=="complete"&&(n.errors=i)),n})}getMergedPaymentSheetAction({result:e,errorActions:n}){const r={};n.forEach(i=>{i.errors.forEach(a=>{e.errors.includes(a)&&(r[a]=i.generateAction)})});let o;for(const i of e.errors){const a=r[i];if(a){o=a();break}}return{firstPaymentSheetAction:o,prioritizedPaymentSheetAction:this.generatePrioritizedPaymentSheetAction(r)}}getUnhandledErrors(e,n){const r=n.flatMap(o=>o.errors);return e.filter(o=>!r.includes(o))}}var J=(t=>(t.InvalidLanguage="Variable $language of type LanguageCode was provided invalid value",t.InvalidCountry="Variable $country of type CountryCode was provided invalid value",t.MissingCartId="Variable $cartId of type ID! was provided invalid value",t.DeliveryAddressInvalidCountry="invalid value: buyerIdentity.deliveryAddressPreferences.0.deliveryAddress.country",t.BuyerIdentityInvalidPhone="Phone is invalid: buyerIdentity.phone",t.BuyerIdentityInvalidCountry="Variable $buyerIdentity of type CartBuyerIdentityInput! was provided invalid value for countryCode",t))(J||{});class Io extends Mo{constructor(e){super(),this.i18n=e}mapResultToPaymentSheetAction(e){const n=this.getErrorActions();this.getUnhandledErrors(e.errors,n).forEach(o=>{S.notify(new Error("[".concat(P.ApplePay,"] mutation result error not handled: ").concat(o)))});const{firstPaymentSheetAction:r}=this.getMergedPaymentSheetAction({result:e,errorActions:this.getErrorActions()});return r||this.mapUnhandledResult()}validateBilling(){return null}validateShipping(){return null}getErrorActions(){return[{errors:[J.InvalidLanguage],generateAction:()=>({action:"abort",effects:[()=>{S.notify(new Error("[".concat(P.ApplePay,"] mutation provided invalid language, aborting")))}]})},{errors:[J.InvalidCountry],generateAction:()=>({action:"abort",effects:[()=>{S.notify(new Error("[".concat(P.ApplePay,"] mutation provided invalid country, aborting")))}]})},{errors:[J.MissingCartId],generateAction:()=>({action:"abort",effects:[()=>{S.notify(new Error("[".concat(P.ApplePay,"] mutation provided invalid cart ID, aborting")))}]})},{errors:[J.BuyerIdentityInvalidPhone],generateAction:()=>({action:"show_error",errors:[new ApplePayError("shippingContactInvalid","phoneNumber",this.i18n.translate("errors.invalid.phone"))]})},{errors:[J.BuyerIdentityInvalidCountry,J.DeliveryAddressInvalidCountry],generateAction:()=>({action:"show_error",errors:[new ApplePayError("shippingContactInvalid","country",this.i18n.translate("errors.invalid.country"))]})}]}mapUnhandledResult(){return{action:"update",errors:[]}}}async function No({cartId:t,partialStreetAddress:e,cartClient:n,instrumentName:r,onError:o}){try{if(!t)throw new Error("[".concat(r,"] provided no cart ID when updating buyer identity"));if(!e)throw new Error("[".concat(r,"] provided no address when updating buyer identity"));if(!n)throw new Error("[".concat(r,"] provided invalid cart client when updating buyer identity"));return await n.updateCartBuyerIdentity({cartId:t,partialStreetAddress:e})}catch(i){return k.updateFailed(r,"updateBuyerIdentity"),o(i),{data:null,errors:[]}}}async function ko({cartId:t,cartClient:e,instrumentName:n,onError:r,selectedDeliveryOptions:o}){try{if(!t)throw new Error("[".concat(n,"] provided no cart ID when updating shipping method"));if(!e)throw new Error("[".concat(n,"] provided invalid cart client when updating shipping method"));return await e.updateSelectedDeliveryOptions(t,o)}catch(i){return k.updateFailed(n,"updateSelectedDeliveryOptions"),r(i),{data:null,errors:[]}}}const Ue="GraphQL Client",dr=0,fr=3,on="An error occurred while fetching from the API. Review 'graphQLErrors' for details.",sn="Response returned unexpected Content-Type:",cn="An unknown error has occurred. The API did not return a data object or any errors in its response.",mt={json:"application/json",multipart:"multipart/mixed"},Ro=1e3,xo=[429,503],un=/@(defer)\b/i,pr="\r\n",Do=/boundary="?([^=";]+)"?/i,hr=pr+pr;function H(t){return t.startsWith("".concat(Ue))?t:"".concat(Ue,": ").concat(t)}function te(t){return t instanceof Error?t.message:JSON.stringify(t)}function mr(t){return t instanceof Error&&t.cause?t.cause:void 0}function ln({client:t,retries:e}){if(e!==void 0&&(typeof e!="number"||e<dr||e>fr))throw new Error("".concat(t,': The provided "retries" value (').concat(e,") is invalid - it cannot be less than ").concat(dr," or greater than ").concat(fr))}function I(t,e){return e&&(typeof e!="object"||Array.isArray(e)||typeof e=="object"&&Object.keys(e).length>0)?{[t]:e}:{}}function dn(t,e){if(t.length===0)return e;const n={[t.pop()]:e};return t.length===0?n:dn(t,n)}function fn(t,e){return Object.keys(e||{}).reduce((n,r)=>(typeof e[r]=="object"||Array.isArray(e[r]))&&t[r]?(n[r]=fn(t[r],e[r]),n):(n[r]=e[r],n),Array.isArray(t)?[...t]:_({},t))}function Bo(t){return t.reduce((e,n,r)=>r===0?_({},n):fn(e,n),{})}function Lo({headers:t,url:e,fetchApi:n=fetch,retries:r=0,logger:o}){ln({client:Ue,retries:r});const i={headers:t,url:e,retries:r},a=Uo(o),s=jo(n,a),u=Fo(s,i),c=qo(u),p=Wo(u);return{config:i,fetch:u,request:c,requestStream:p}}async function $o(t){return new Promise(e=>setTimeout(e,t))}function Uo(t){return e=>{t&&t(e)}}async function pn(t){const{errors:e,data:n,extensions:r}=await t.json();return _(_(_({},I("data",n)),I("extensions",r)),e||!n?{errors:z(_({networkStatusCode:t.status,message:H(e?on:cn)},I("graphQLErrors",e)),{response:t})}:{})}function jo(t,e){const n=async(r,o,i)=>{const a=o+1,s=i+1;let u;try{if(u=await t(...r),e({type:"HTTP-Response",content:{requestParams:r,response:u}}),!u.ok&&xo.includes(u.status)&&a<=s)throw new Error;return u}catch(c){if(a<=s)return await $o(Ro),e({type:"HTTP-Retry",content:{requestParams:r,lastResponse:u,retryAttempt:o,maxRetries:i}}),n(r,a,i);throw new Error(H("".concat(i>0?"Attempted maximum number of ".concat(i," network retries. Last message - "):"").concat(te(c))))}};return n}function Fo(t,{url:e,headers:n,retries:r}){return async(o,i={})=>{const{variables:a,headers:s,url:u,retries:c}=i,p=JSON.stringify({query:o,variables:a});ln({client:Ue,retries:c});const m=[u!=null?u:e,{method:"POST",headers:_(_({},n),s),body:p}];return t(m,1,c!=null?c:r)}}function qo(t){return async(...e)=>{if(un.test(e[0]))throw new Error(H("This operation will result in a streamable response - use requestStream() instead."));try{const n=await t(...e),{status:r,statusText:o}=n,i=n.headers.get("content-type")||"";return n.ok?i.includes(mt.json)?pn(n):{errors:{networkStatusCode:r,message:H("".concat(sn," ").concat(i)),response:n}}:{errors:{networkStatusCode:r,message:H(o),response:n}}}catch(n){return{errors:{message:te(n)}}}}}function Go(t){return Z(this,null,function*(){if(t.body[Symbol.asyncIterator])try{for(var e=oe(t.body),n,r,o;n=!(r=yield new B(e.next())).done;n=!1)yield r.value.toString()}catch(i){o=[i]}finally{try{n&&(r=e.return)&&(yield new B(r.call(e)))}finally{if(o)throw o[0]}}else{const i=t.body.getReader(),a=new TextDecoder;let s;try{for(;!(s=yield new B(i.read())).done;)yield a.decode(s.value)}finally{i.cancel()}}})}function Ho(t,e){return{[Symbol.asyncIterator](){return Z(this,null,function*(){try{let a="";try{for(var n=oe(t),r,o,i;r=!(o=yield new B(n.next())).done;r=!1){const s=o.value;if(a+=s,a.indexOf(e)>-1){const u=a.lastIndexOf(e),c=a.slice(0,u).split(e).filter(p=>p.trim().length>0).map(p=>p.slice(p.indexOf(hr)+hr.length).trim());c.length>0&&(yield c),a=a.slice(u+e.length),a.trim()==="--"&&(a="")}}}catch(s){i=[s]}finally{try{r&&(o=n.return)&&(yield new B(o.call(n)))}finally{if(i)throw i[0]}}}catch(a){throw new Error("Error occured while processing stream payload - ".concat(te(a)))}})}}}function Wo(t){return async(...e)=>{var n;if(!un.test(e[0]))throw new Error(H("This operation does not result in a streamable response - use request() instead."));try{const r=await t(...e),{status:o,statusText:i}=r;if(!r.ok)throw new Error(i,{cause:r});const a=r.headers.get("content-type")||"";if(Object.values(mt).every(b=>!a.includes(b)))throw new Error("".concat(sn," ").concat(a),{cause:r});if(a.includes(mt.json))return{[Symbol.asyncIterator](){return Z(this,null,function*(){const b=yield new B(pn(r));yield z(_({},b),{hasNext:!1})})}};const s=(a!=null?a:"").match(Do),u="--".concat(s?s[1]:"-");if(!((n=r.body)!=null&&n.getReader)&&!r.body[Symbol.asyncIterator])throw new Error("API multipart response did not return an iterable body",{cause:r});const c=Go(r);let p={},m;return{[Symbol.asyncIterator](){return Z(this,null,function*(){var b,d;try{let y=!0;try{for(var v=oe(Ho(c,u)),l,h,f;l=!(h=yield new B(v.next())).done;l=!1){const O=h.value.map(A=>{try{return JSON.parse(A)}catch(D){throw new Error("Error in parsing multipart response - ".concat(te(D)))}}).map(A=>{const{data:D,path:R,hasNext:K,extensions:kt,errors:Mt}=A;return z(_(_({data:D&&R?dn(R,D):D||{}},I("errors",Mt)),I("extensions",kt)),{hasNext:K})});m=(d=(b=O.find(A=>A.extensions))==null?void 0:b.extensions)!=null?d:m;const E=O.map(({errors:A})=>A).filter(A=>A&&A.length>0).flat();if(p=Bo([p,...O.map(({data:A})=>A)]),y=O.slice(-1)[0].hasNext,E.length>0)throw new Error(on,{cause:{graphQLErrors:E}});if(Object.keys(p).length===0)throw new Error(cn);yield z(_(_({},I("data",p)),I("extensions",m)),{hasNext:y})}}catch(g){f=[g]}finally{try{l&&(h=v.return)&&(yield new B(h.call(v)))}finally{if(f)throw f[0]}}if(y)throw new Error("Response stream terminated unexpectedly")}catch(y){const g=mr(y);yield z(_(_({},I("data",p)),I("extensions",m)),{errors:z(_({message:H(te(y)),networkStatusCode:o},I("graphQLErrors",g==null?void 0:g.graphQLErrors)),{response:r}),hasNext:!1})}})}}}catch(r){return{[Symbol.asyncIterator](){return Z(this,null,function*(){const o=mr(r);yield{errors:_(_({message:H(te(r))},I("networkStatusCode",o==null?void 0:o.status)),I("response",o)),hasNext:!1}})}}}}}const Vo="mutation cartCreate($input:CartInput!$country:CountryCode$language:LanguageCode)@inContext(country:$country language:$language){cartCreate(input:$input){cart{id checkoutUrl cost{totalAmount{amount}}lines(first:10){edges{node{quantity cost{totalAmount{amount currencyCode}}}}}deliveryGroups(first:10){edges{node{id selectedDeliveryOption{estimatedCost{amount currencyCode}}deliveryOptions{code title description estimatedCost{amount currencyCode}handle}}}}}errors:userErrors{...on CartUserError{message field code}}}}",Ko="mutation cartBuyerIdentityUpdate($cartId:ID!$buyerIdentity:CartBuyerIdentityInput!$country:CountryCode$language:LanguageCode)@inContext(country:$country language:$language){cartBuyerIdentityUpdate(cartId:$cartId buyerIdentity:$buyerIdentity){cart{id buyerIdentity{deliveryAddressPreferences{...on MailingAddress{address1 address2 city zip province phone country firstName lastName}}}deliveryGroups(first:10){edges{node{id selectedDeliveryOption{code title description estimatedCost{amount currencyCode}}deliveryOptions{code title description estimatedCost{amount currencyCode}handle}}}}cost{subtotalAmount{amount currencyCode}totalAmount{amount currencyCode}totalTaxAmount{amount currencyCode}totalDutyAmount{amount currencyCode}}discountAllocations{discountedAmount{amount currencyCode}}lines(first:10){edges{node{quantity cost{totalAmount{amount currencyCode}}}}}}errors:userErrors{...on CartUserError{message field code}}}}",zo="mutation cartSelectedDeliveryOptionsUpdate($cartId:ID!$selectedDeliveryOptions:[CartSelectedDeliveryOptionInput!]!$country:CountryCode=CA$language:LanguageCode=EN)@inContext(country:$country language:$language){cartSelectedDeliveryOptionsUpdate(cartId:$cartId selectedDeliveryOptions:$selectedDeliveryOptions){cart{id buyerIdentity{deliveryAddressPreferences{...on MailingAddress{address1 address2 city zip province phone country firstName lastName}}}deliveryGroups(first:10){edges{node{id selectedDeliveryOption{estimatedCost{amount currencyCode}handle}deliveryOptions{code title description estimatedCost{amount currencyCode}handle}}}}cost{subtotalAmount{amount currencyCode}totalAmount{amount}totalTaxAmount{amount currencyCode}totalDutyAmount{amount currencyCode}}discountAllocations{discountedAmount{amount currencyCode}}lines(first:10){edges{node{quantity cost{totalAmount{amount currencyCode}}}}}}errors:userErrors{...on CartUserError{message field code}}}}",Co="mutation applePaySessionCreate{applePaySessionCreate{...@defer{applePaySession{body}}}}",Jo="query cartQuery($id:ID!$country:CountryCode$language:LanguageCode)@inContext(country:$country language:$language){cart(id:$id){id checkoutUrl cost{totalAmount{amount}}lines(first:10){edges{node{quantity cost{totalAmount{amount currencyCode}}}}}deliveryGroups(first:10){edges{node{id selectedDeliveryOption{estimatedCost{amount currencyCode}}deliveryOptions{code title description estimatedCost{amount currencyCode}handle}}}}}}",Yo="2023-07";class At{constructor({accessToken:e,country:n,locale:r,apiVersion:o=Yo}){if(w(this,"client"),w(this,"country"),w(this,"locale"),!e)throw new Error("StorefrontApiClient constructed with no access token");if(!n)throw new Error("StorefrontApiClient constructed with no buyer country");if(!r)throw new Error("StorefrontApiClient constructed with no locale");this.country=n,this.locale=r;const i="/api/".concat(o,"/graphql.json");this.client=Lo({headers:{"Content-Type":"application/json",Accept:"application/json","X-Shopify-Storefront-Access-Token":e,"X-SDK-Variant":"portable-wallets"},url:i,retries:0,logger:a=>{if(a.type==="HTTP-Response"){const[s,u]=a.content.requestParams;S.leaveBreadcrumb("POST: ".concat(s),"request",{statusCode:a.content.response.status,statusText:a.content.response.statusText,url:s,method:u==null?void 0:u.method,headers:u==null?void 0:u.headers,body:u==null?void 0:u.body})}}})}async createCart(e){var n;const r=this.formatLanguage(this.locale),{errors:o,data:i}=await this.client.request(Vo,{variables:{input:{lines:{merchandiseId:e.merchandiseId,quantity:e.quantity,sellingPlanId:e.sellingPlanId,attributes:Object.entries((n=e.lineItemProperties)!=null?n:{}).map(([a,s])=>({key:a,value:s}))}},country:this.country,language:r}});if(o&&this.onError(o),i)return this.parseCartResponse(i.cartCreate.cart);throw new Error("createCart query returned nothing")}async updateCartBuyerIdentity(e){var n,r,o,i;const{cartId:a,partialStreetAddress:s}=e,u="cartBuyerIdentityUpdate",c=this.formatLanguage(this.locale),p=await this.client.request(Ko,{variables:{cartId:a,country:this.country,language:c,buyerIdentity:{countryCode:s.countryCode,phone:s.phone,deliveryAddressPreferences:[{deliveryAddress:{address1:s.address1,address2:s.address2,city:s.city,zip:s.postalCode,province:s.zoneCode,phone:s.phone,country:s.countryCode,firstName:s.firstName,lastName:s.lastName}}]}}});return{data:(r=(n=p.data)==null?void 0:n[u])!=null&&r.cart?this.parseCartResponse((i=(o=p.data)==null?void 0:o[u])==null?void 0:i.cart):null,errors:this.parseErrors(p,u)}}async updateSelectedDeliveryOptions(e,n){var r,o,i,a;const s="cartSelectedDeliveryOptionsUpdate",u=this.formatLanguage(this.locale),c=await this.client.request(zo,{variables:{cartId:e,selectedDeliveryOptions:[{deliveryGroupId:n.deliveryGroupId,deliveryOptionHandle:n.deliveryOptionHandle}],country:this.country,language:u}});return{data:(o=(r=c.data)==null?void 0:r[s])!=null&&o.cart?this.parseCartResponse((a=(i=c.data)==null?void 0:i[s])==null?void 0:a.cart):null,errors:this.parseErrors(c,s)}}async applePaySessionCreate(){var e,n,r;const o=await this.client.requestStream(Co);try{for(var i=oe(o),a,s,u;a=!(s=await i.next()).done;a=!1){const c=s.value;c.errors&&this.onError(c.errors);const p=(r=(n=(e=c.data)==null?void 0:e.applePaySessionCreate)==null?void 0:n.applePaySession)==null?void 0:r.body;if(p)return p}}catch(c){u=[c]}finally{try{a&&(s=i.return)&&await s.call(i)}finally{if(u)throw u[0]}}throw new Error("No response")}async fetchCart(e){const n=this.formatLanguage(this.locale),{data:r}=await this.client.request(Jo,{variables:{id:e,country:this.country,language:n}});if(r)return this.parseCartResponse(r.cart);throw new Error("cartQuery returned nothing")}onError(e){if(!e)return;S.leaveBreadcrumb("GraphQL errors","error",e);const n=e!=null&&e.networkStatusCode?"HTTP status ".concat(e.networkStatusCode):e.message;throw new Error("GraphQL query failed: ".concat(n))}formatLanguage(e){return e.includes("-")?e.split("-")[0].toUpperCase():e.toUpperCase()}parseCartResponse(e){const n=e.lines.edges.map(i=>{const a=i.node;return{quantity:a.quantity,totalAmount:{amount:a.cost.totalAmount.amount,currencyCode:a.cost.totalAmount.currencyCode}}}),r=[],o=[];return e.deliveryGroups.edges.forEach(i=>{const a=i.node.selectedDeliveryOption;o.push(this.buildDeliveryOption(a,i.node.id)),i.node.deliveryOptions.forEach(s=>{r.push(this.buildDeliveryOption(s,i.node.id))})}),{id:e.id,totalAmount:e.cost.totalAmount,subtotalAmount:e.cost.subtotalAmount,totalTaxAmount:e.cost.totalTaxAmount,totalDutyAmount:e.cost.totalDutyAmount,discountAllocations:e.discountAllocations,lineItems:n,deliveryOptions:r,selectedDeliveryOptions:o,checkoutUrl:e.checkoutUrl}}parseErrors(e,n){var r,o,i,a,s,u,c;const p=(i=(o=(r=e.errors)==null?void 0:r.graphQLErrors)==null?void 0:o.map(d=>d.message.replace(/\(Expected.*\)/,"").trim()))!=null?i:[],m=(c=(u=(s=(a=e.data)==null?void 0:a[n])==null?void 0:s.errors)==null?void 0:u.map(d=>d.field&&d.field.length>0?"".concat(d.message,": ").concat(d.field.join(".")):d.message))!=null?c:[],b=[...p,...m];return S.leaveBreadcrumb("GraphQL errors","error",b),b}buildDeliveryOption(e,n){return{title:e.title,estimatedCost:{amount:e.estimatedCost.amount,currencyCode:e.estimatedCost.currencyCode},handle:e.handle,deliveryGroupId:n,description:e.description}}}const Xo=6;class Zo{constructor({accessToken:e,buyerCountry:n,button:r,i18n:o,merchantName:i,paymentRequest:a,dataSource:s,apiClient:u}){w(this,"name",P.ApplePay),w(this,"accessToken"),w(this,"button"),w(this,"buyerCountry"),w(this,"cart"),w(this,"apiClient"),w(this,"dataSource"),w(this,"i18n"),w(this,"merchantName"),w(this,"session"),w(this,"paymentSheetActionGenerator"),w(this,"begin",()=>{this.session.begin()}),w(this,"onvalidatemerchant",async()=>{try{const c=this.getMerchantSession(),p=await Et({element:this.button,attribute:"aria-disabled",instrumentName:P.ApplePay,onError:()=>this.terminateSession(),dataSource:this.dataSource});this.cart=p,this.session.completeMerchantValidation(await c)}catch(c){this.terminateSession(c)}}),w(this,"onshippingcontactselected",async c=>{var p;try{const m=So(c.shippingContact),b=await No({cartId:this.cart.id,partialStreetAddress:m,cartClient:this.apiClient,instrumentName:this.name,onError:this.terminateSession}),d=this.paymentSheetActionGenerator.mapResultToPaymentSheetAction(b);(p=d.effects)==null||p.forEach(v=>v()),lr({paymentSheetAction:d,onProceed:v=>this.completeShippingContactSelection(b.data,v),terminateSession:this.terminateSession})}catch(m){S.notify(m),this.terminateSession()}}),w(this,"onshippingmethodselected",async c=>{var p,m;try{const b=await ko({cartId:this.cart.id,cartClient:this.apiClient,instrumentName:this.name,onError:this.terminateSession,selectedDeliveryOptions:{deliveryGroupId:(p=this.cart.selectedDeliveryOptions[0])==null?void 0:p.deliveryGroupId,deliveryOptionHandle:c.shippingMethod.identifier}}),d=this.paymentSheetActionGenerator.mapResultToPaymentSheetAction(b);(m=d.effects)==null||m.forEach(v=>v()),lr({paymentSheetAction:d,onProceed:()=>this.completeShippingMethodSelection(b.data),terminateSession:this.terminateSession})}catch(b){this.terminateSession(b)}}),w(this,"oncancel",()=>{k.sheetCancelled(P.ApplePay),this.button.removeAttribute("aria-disabled")}),w(this,"terminateSession",c=>{c&&S.notify(c),this.session.abort(),Xn(this.i18n,"apple_pay"),this.button.removeAttribute("aria-disabled")}),w(this,"getMostRecentNonNullCart",(c,p)=>c?(this.cart=c,c):p),w(this,"handleNullCart",c=>{if(!c)throw new Error("[".concat(P.ApplePay,"] no cart returned on mutation, aborting"))}),w(this,"completeShippingContactSelection",(c,p)=>{try{const m=this.getMostRecentNonNullCart(c,this.cart);this.session.completeShippingContactSelection({errors:p!=null?p:[],newTotal:cr(this.merchantName,m.totalAmount),newLineItems:ur({subtotal:m.subtotalAmount,selectedDeliveryOptions:m.selectedDeliveryOptions,duties:m.totalDutyAmount,taxes:m.totalTaxAmount,discountAllocations:m.discountAllocations,i18n:this.i18n}),newShippingMethods:Oo(m.deliveryOptions)})}catch(m){this.terminateSession(m)}}),w(this,"completeShippingMethodSelection",c=>{try{this.handleNullCart(c),this.session.completeShippingMethodSelection({newTotal:cr(this.merchantName,c.totalAmount),newLineItems:ur({subtotal:c.subtotalAmount,selectedDeliveryOptions:c.selectedDeliveryOptions,duties:c.totalDutyAmount,taxes:c.totalTaxAmount,discountAllocations:c.discountAllocations,i18n:this.i18n})})}catch(p){this.terminateSession(p)}}),this.session=new ApplePaySession(Xo,a),this.accessToken=e,this.buyerCountry=n,this.button=r,this.cart=null,this.apiClient=u,this.dataSource=s,this.i18n=o,this.merchantName=i,this.session.onvalidatemerchant=this.onvalidatemerchant,this.session.onshippingcontactselected=this.onshippingcontactselected,this.session.onshippingmethodselected=this.onshippingmethodselected,this.session.oncancel=this.oncancel,this.paymentSheetActionGenerator=new Io(o)}async getMerchantSession(){const e=await new At({accessToken:this.accessToken,country:this.buyerCountry,locale:this.i18n.locale,apiVersion:"unstable"}).applePaySessionCreate();return JSON.parse(e)}}class Qo extends We{constructor(){super(...arguments),w(this,"fragment",null),w(this,"button",null),w(this,"cart",null)}static get observedAttributes(){return["disabled"]}get merchantName(){var e;return(e=this.getAttribute("merchant-name"))!=null?e:""}async connectedCallback(){this.render()}attributeChangedCallback(e,n,r){n!==r&&e==="disabled"&&this.button&&this.button.setAttribute("aria-disabled",r)}async handleClick(e){var n,r;if(e.preventDefault(),!(this.disabled||!this.button||this.button.hasAttribute("aria-disabled")))try{const o=JSON.parse((r=(n=document.querySelector("script#apple-pay-shop-capabilities"))==null?void 0:n.textContent)!=null?r:"null");if(!o)throw new Error("missing payment request");const i=new Zo({accessToken:this.accessToken,buyerCountry:this.buyerCountry,button:this.button,i18n:this.i18n,merchantName:this.merchantName,paymentRequest:o,dataSource:this.dataSource,apiClient:this.apiClient});if(!i)throw new Error("missing ApplePaySession");i.begin(),k.sheetClicked({instrument:P.ApplePay,result:"success"})}catch(o){S.notify(o),k.sheetClicked({instrument:P.ApplePay,result:"failed"})}}render(){var e;if(this.button||(this.button=document.createElement("button"),this.button.setAttribute("aria-label",this.i18n.translate("brand.apple_pay")),this.button.onclick=n=>this.handleClick(n),this.button.className="apple-pay-button ".concat(bt.BRANDED_BUTTON)),this.disabled&&this.button.setAttribute("aria-disabled","true"),!this.fragment){this.fragment=document.createDocumentFragment();const n=document.createElement("style");n.innerHTML=Eo,this.fragment.append(n,this.button),this.appendChild(this.fragment),(e=this.onRendered)==null||e.call(this)}}}class ei extends Pt{constructor(e,n){var r,o;super(e),w(this,"buyerCountry"),w(this,"companyFieldRequired"),w(this,"merchantName"),this.buyerCountry=n.country;const i=e==null?void 0:e.wallet_params;this.companyFieldRequired=(r=i.companyRequired)!=null?r:!1,this.merchantName=(o=i.merchantName)!=null?o:""}static walletName(){return"apple_pay"}getWebComponentName(){return"shopify-apple-pay-button"}getWebComponentClass(){return Qo}getInstrumentName(){return P.ApplePay}getWalletParams(){var e;return{"merchant-name":(e=this.merchantName)!=null?e:""}}applePayInIframe(){return typeof window>"u"||window.self!==window.top}getIsUserEligibleForApplePayInChina(){const e=navigator.userAgent.match(/(\((iPhone|iPad); CPU (iPhone )?OS ((\d+(_?)){1,3}))/g);if(!e)return!1;const n=e[0].match(/(\d+(_?)){1,3}/);if(!n)return!1;const[r,o]=n[0].split("_").map(i=>Number(i));return r>11||r===11&&o>=2}isPartnerSDKEligible(){return window.ApplePaySession&&Object.prototype.hasOwnProperty.call(window.ApplePaySession,"canMakePayments")&&window.ApplePaySession.canMakePayments()}shouldLoadWallet(){return this.applePayInIframe()||this.companyFieldRequired||this.buyerCountry==="CN"&&!this.getIsUserEligibleForApplePayInChina()?!1:!!window.ApplePaySession}}const ti=[go,_o,ei],ri=new Map(ti.map(t=>[t.walletName(),(e,n)=>new t(e,n)]));function hn(t,e){const n=ri.get(t.name);if(!n)throw new Error("Can't build wallet with name ".concat(t.name));return n(t,e)}function ni(t,e){return t.map(n=>hn(n,e))}var tt=(t=>(t.ButtonDisplay="buttonDisplay",t.LoadInstrument="loadInstrument",t))(tt||{});function mn(){var t,e;return!!((t=window.performance)!=null&&t.mark)&&!!((e=window.performance)!=null&&e.measure)}function Ot(t,e){return ai(t,e),()=>oi(t,e)}function ai(t,e){mn()&&window.performance.mark("".concat(t,"-").concat(e,"-start"))}function oi(t,e){var n,r;if(mn())try{const o="".concat(t,"-").concat(e,"-start"),i="".concat(t,"-").concat(e,"-end"),a="".concat(t,"-").concat(e,"-duration");window.performance.mark(i);const s=(r=window.performance.measure(a,o,i))!=null?r:(n=window.performance.getEntriesByName(a,"measure"))==null?void 0:n[0],u=s==null?void 0:s.duration;if(u==null){S.notify(new Error("Could not measure performance of ".concat(t," ").concat(e)),{severity:"warning"});return}return u}catch(o){S.notify(o);return}}const yn="dynamic-checkout .wallet-button-fade-in,cart-wallet-buttons .wallet-button-fade-in{animation:animation-fade-in .3s cubic-bezier(.1,.79,1,1)}dynamic-checkout .shopify-payment-button__button,cart-wallet-buttons .shopify-payment-button__button{cursor:pointer}@keyframes animation-fade-in{0%{opacity:0}to{opacity:1}}button[aria-disabled=true]{opacity:.5;cursor:not-allowed}\n",ii=".shopify-payment-button__button--hidden{visibility:hidden}.shopify-payment-button__button{border-radius:4px;border:none;box-shadow:0 0 0 0 transparent;color:#fff;cursor:pointer;display:block;font-size:1em;font-weight:500;line-height:1;text-align:center;width:100%;transition:background .2s ease-in-out}.shopify-payment-button__button[disabled]{opacity:.6;cursor:default}.shopify-payment-button__button--unbranded{background-color:#1990c6;padding:1em 2em}.shopify-payment-button__button--unbranded:hover:not([disabled]){background-color:#136f99}.shopify-payment-button__more-options{background:transparent;border:0 none;cursor:pointer;display:block;font-size:1em;margin-top:1em;text-align:center;width:100%}.shopify-payment-button__more-options:hover:not([disabled]){text-decoration:underline}.shopify-payment-button__more-options[disabled]{opacity:.6;cursor:not-allowed}.shopify-payment-button__button--branded{display:flex;flex-direction:column;min-height:44px;position:relative;z-index:1}.shopify-payment-button__button--branded .shopify-cleanslate{flex:1!important;display:flex!important;flex-direction:column!important}.shopify-payment-button__button.button.loading{position:relative;color:transparent}.shopify-payment-button__button.button.loading>.loading-overlay__spinner{top:50%;left:50%;transform:translate(-50%,-50%);position:absolute;height:100%;display:flex;align-items:center}.shopify-payment-button__button.button.loading>.loading-overlay__spinner .spinner{width:-moz-fit-content;width:-webkit-fit-content;width:fit-content}.button.loading>.loading-overlay__spinner .path{stroke:#fff}.shopify-payment-button__button .loading-overlay__spinner{width:1.8rem;display:inline-block}.shopify-payment-button__button .spinner{animation:shopify-rotator 1.4s linear infinite}@keyframes shopify-rotator{0%{transform:rotate(0)}to{transform:rotate(270deg)}}.shopify-payment-button__button .path{stroke-dasharray:280;stroke-dashoffset:0;transform-origin:center;stroke:#121212;animation:shopify-dash 1.4s ease-in-out infinite}@media screen and (forced-colors: active){.shopify-payment-button__button .path{stroke:CanvasText}}@keyframes shopify-dash{0%{stroke-dashoffset:280}50%{stroke-dashoffset:75;transform:rotate(135deg)}to{stroke-dashoffset:280;transform:rotate(450deg)}}@keyframes walletsLoadingSkeleton{50%{opacity:1}75%{opacity:.5}to{opacity:1}}.shopify-payment-button__skeleton{animation:walletsLoadingSkeleton 4s ease infinite;animation-delay:-.168s;background-color:#dedede;box-sizing:border-box}\n";function gn(t,e,n){if(Se!=null&&Se.length){const r=Se.join(",");t.querySelectorAll(r).forEach(o=>{n===null?o.removeAttribute(e):o.setAttribute(e,n)})}}function si(t,e){try{return JSON.parse(t)}catch(n){throw new Error("[".concat(e,"] Error while parsing walletConfigs JSON: ").concat(n))}}function ci(t){return t.filter(e=>e.shouldLoadWallet())}class ui{constructor(e,n,r){w(this,"element"),this.apiClient=n,this.instrumentName=r,this.element=e()}async getCart(){const e=Va(this.element);return e?this.apiClient.createCart(e):Promise.reject(new Error("[".concat(this.instrumentName,"] unable to find product form")))}}const Ge=class Ne extends en{constructor(){super(),w(this,"instanceNumber",++Ne.instanceCount),w(this,"formObserver"),w(this,"wrapper"),w(this,"i18n"),w(this,"dataSource"),this.formObserver=new Ja(this,e=>this.disabled=e),wr({shop:{shopId:this.shopId}}),this.instanceNumber===1&&hi()}static get observedAttributes(){return["access-token","disabled"]}async connectedCallback(){try{super.clearExistingButtons({expectedSkeleton:"shopify-payment-button__skeleton"}),this.instanceNumber===1&&k.initStarted();const e=Ot(tt.ButtonDisplay,"dc:".concat(this.instanceNumber)),n=vt(),r=this.buildWalletConfigs();if(!(r instanceof Array))throw new Error("[DynamicCheckout] invalid walletConfigs found");const o=await di(r,{country:this.buyerCountry});this.i18n=await n;const i=new At({accessToken:this.accessToken,country:this.buyerCountry,locale:this.i18n.locale}),a=()=>(this.wrapper||(this.wrapper=document.createElement("div")),this.wrapper);this.dataSource=new ui(a,i,o.getInstrumentName());const s=o.createWebComponent({accessToken:this.accessToken,country:this.buyerCountry,disabled:String(this.disabled),walletParams:o.getWalletParams(),dataSource:this.dataSource,i18n:this.i18n,apiClient:i});if(!s)throw new Error("[DynamicCheckout] No web component found");const u=o.getInstrumentName();s.onRendered=()=>{k.instrumentLoaded({instrument:u,measurement:e()})},this.innerHTML="",this.render(s,u),k.initCompleted("success"),this.instanceNumber===1&&gi()}catch(e){this.innerHTML="",k.initCompleted("failed"),S.notify(e)}}attributeChangedCallback(e,n,r){n!==r&&gn(this,e,r)}buildWalletConfigs(){const e=this.walletConfigs;if(!e)throw new Error("[DynamicCheckout] Created dynamic checkout button with no wallet configs");try{return JSON.parse(e)}catch(n){throw new Error("[DynamicCheckout] Error while parsing walletConfigs JSON: ".concat(n))}}render(e,n){var r,o;if(!this.wrapper)throw new Error("[DynamicCheckout] tried to render with no wrapper element");const i=document.createElement("style");if(i.innerHTML=yn,this.wrapper.className="wallet-button-fade-in",this.wrapper.appendChild(e),n!==P.BuyItNow){const s=document.createElement("more-payment-options-link");s.setAttribute("buyer-country",(r=this.buyerCountry)!=null?r:""),s.setAttribute("access-token",(o=this.accessToken)!=null?o:""),s.dataSource=this.dataSource,s.i18n=this.i18n,s.setAttribute("disabled",String(this.disabled)),this.wrapper.appendChild(s)}const a=new DocumentFragment;a.appendChild(i),a.appendChild(this.wrapper),this.appendChild(a),this.formObserver.setupMutationObservers()}};w(Ge,"instanceCount",0);let yt=Ge;function li(t){var e;if(!Ar())return null;const n=(e=zn())==null?void 0:e.toLowerCase();return n?t.find(r=>r.getInstrumentName().toLowerCase().includes(n)):null}async function di(t,e){var n;t.push({name:"buy_it_now",wallet_params:{}});const r=pi(fi(t,e)),o=(n=li(r))!=null?n:r[0];if(await o.loadWalletSDK(),!o.isPartnerSDKEligible())throw new Error("Selected wallet SDK ineligible");return o}function fi(t,e){return t.map(n=>hn(n,e))}function pi(t){return t.filter(e=>e.shouldLoadWallet())}function hi(){var t,e;(e=(t=window.Shopify)==null?void 0:t.PaymentButton)!=null&&e.isStorefrontPortableWallets&&(yi()||mi())}function mi(){const t=document.createElement("style");t.id="shopify-dynamic-checkout",t.innerHTML=ii,document.head.appendChild(t)}function yi(){return!!document.querySelector("style#shopify-dynamic-checkout")}function gi(){document.dispatchEvent(new Event("shopify:payment_button:loaded",{bubbles:!0,cancelable:!0}))}Y("dynamic-checkout",yt),Y("more-payment-options-link",Qr);class bi{constructor(e,n){this.cartToken=e,this.apiClient=n}async getCart(){return this.apiClient.fetchCart("gid://shopify/Cart/".concat(this.cartToken))}}const He=class bn extends en{constructor(){super(),w(this,"instanceNumber",++bn.instanceCount),wr({shop:{shopId:this.shopId,cartId:this.cartId}})}static get observedAttributes(){return["access-token"]}async connectedCallback(){try{super.clearExistingButtons(),V({event:x.CartInitCalled});const e=Ot(tt.ButtonDisplay,"cart:".concat(this.instanceNumber));if(!this.walletConfigs)throw new Error("[CartWalletButtons] walletConfigs does not exist");const n=si(this.walletConfigs,"CartWalletButtons");if(!(n instanceof Array))throw new Error("[CartWalletButtons] invalid walletConfigs found");const r=vt(),o=await vi(n,{country:this.buyerCountry},this.instanceNumber),i=await r,a=new At({accessToken:this.accessToken,country:this.buyerCountry,locale:i.locale}),s=vr("cart");if(s===null)throw new Error("[CartWalletButtons] cart cookie does not exist");const u=new bi(s,a),c=o.map(p=>p.createWebComponent({accessToken:this.accessToken,country:this.buyerCountry,dataSource:u,i18n:i,apiClient:a}));if(c.length===0){this.innerHTML="";return}this.innerHTML="",this.render(c),V({event:x.InstrumentLoaded,instrumentId:"CartWalletButtons",ttl:e()})}catch(e){this.innerHTML="",S.notify(e)}}attributeChangedCallback(e,n,r){n!==r&&gn(this,e,r)}render(e){const n=document.createElement("style");n.innerHTML=yn;const r=document.createElement("div");r.className="wallet-button-fade-in",e.forEach(i=>{r.appendChild(i)});const o=new DocumentFragment;o.appendChild(n),o.appendChild(r),this.appendChild(o)}};w(He,"instanceCount",0);let gt=He;async function vi(t,e,n){const r=ci(ni(t,e));return await Promise.all(r.map(async o=>{try{const i=o.getInstrumentName(),a=Ot(tt.LoadInstrument,"".concat(i,":").concat(n));await o.loadWalletSDK(),k.instrumentLoaded({instrument:i,measurement:a()})}catch(i){S.notify(i)}})),r.filter(o=>o.isPartnerSDKEligible())}Y("cart-wallet-buttons",gt),Bn(S),Ln(S);
